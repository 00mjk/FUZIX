#define NUM_OBJ 71
#define WORDSIZE 4
#include <stdint.h>

struct location {
  const uint8_t *text;
  uint8_t exit[6];
};

const uint8_t toomuch[] = { "I am carrying too much. " };
const uint8_t dead[] = { "I am dead.\n" };
const uint8_t stored_msg[] = { "I have stored " };
const uint8_t stored_msg2[] = { "treasures. On a scale of 0 to 100, that rates " };
const uint8_t dotnewline[] = { ".\n" };
const uint8_t newline[] = { "\n" };
const uint8_t carrying[] = { "I am carrying:\n" };
const uint8_t dashstr[] = { " - " };
const uint8_t nothing[] = { "nothing" };
const uint8_t lightout[] = { "My light has run out." };
const uint8_t lightoutin[] = { "My light runs out in " };
const uint8_t turns[] = { "turns" };
const uint8_t turn[] = { "turn" };
const uint8_t whattodo[] = { "\nTell me what to do ? " };
const uint8_t prompt[] = { "\n> " };
const uint8_t dontknow[] = { "You use word(s) I don't know! " };
const uint8_t givedirn[] = { "Give me a direction too. " };
const uint8_t darkdanger[] = { "Dangerous to move in the dark! " };
const uint8_t brokeneck[] = { "I fell down and broke my neck. " };
const uint8_t cantgo[] = { "I can't go in that direction. " };
const uint8_t dontunderstand[] = { "I don't understand your command. " };
const uint8_t notyet[] = { "I can't do that yet. " };
const uint8_t beyondpower[] = { "It is beyond my power to do that. " };
const uint8_t okmsg[] = { "O.K. " };
const uint8_t whatstr[] = { "What ? " };
const uint8_t itsdark[] = { "I can't see. It is too dark!" };
const uint8_t youare[] = { "I am in a " };
const uint8_t nonestr[] = { "none" };
const uint8_t obexit[] = { "\nObvious exits: " };
const uint8_t canalsosee[] = { "I can also see: " };
const uint8_t playagain[] = { "Do you want to play again Y/N: " };
const uint8_t invcond[] = { "INVCOND" };
const uint8_t *exitmsgptr[] = {
  (uint8_t *)"North",
  (uint8_t *)"South",
  (uint8_t *)"East",
  (uint8_t *)"West",
  (uint8_t *)"Up",
  (uint8_t *)"Down"
};



/*
 * 
 *	Game database follows below. Although linked into the same asm
 *	file to make life easier this is just "mere aggregation" for
 *	convenience, due to limits in the tool chain and the game licence
 *	not the GPL applies below this point
 */
const uint8_t startlamp = 1;
const uint8_t lightfill = 1;
const uint8_t startcarried = 0;
const uint8_t maxcar = 10;
const uint8_t treasure = 13;
const uint8_t treasures = 13;
const uint8_t lastloc = 24;
const uint8_t startloc = 1;
const uint8_t loctxt_0[] = {
0 };
const uint8_t loctxt_1[] = {
98, 111, 116, 116, 111, 109, 32, 98, 117, 110, 107, 0 };
const uint8_t loctxt_2[] = {
115, 104, 105, 112, 39, 115, 32, 99, 97, 98, 105, 110, 0 };
const uint8_t loctxt_3[] = {
42, 73, 39, 109, 32, 111, 110, 32, 97, 32, 100, 111, 99, 107, 0 };
const uint8_t loctxt_4[] = {
42, 73, 39, 109, 32, 111, 110, 32, 100, 101, 99, 107, 0 };
const uint8_t loctxt_5[] = {
98, 101, 97, 99, 104, 32, 98, 121, 32, 97, 32, 115, 109, 97, 108, 108, 32, 104, 105, 108, 108, 0 };
const uint8_t loctxt_6[] = {
42, 73, 39, 109, 32, 111, 110, 32, 108, 101, 100, 103, 101, 32, 56, 32, 102, 101, 101, 116, 32, 98, 101, 108, 111, 119, 32, 104, 105, 108, 108, 32, 115, 117, 109, 109, 105, 116, 0 };
const uint8_t loctxt_7[] = {
42, 73, 39, 109, 32, 111, 110, 32, 116, 111, 112, 32, 111, 102, 32, 97, 32, 115, 109, 97, 108, 108, 32, 104, 105, 108, 108, 0 };
const uint8_t loctxt_8[] = {
99, 97, 118, 101, 114, 110, 0 };
const uint8_t loctxt_9[] = {
116, 111, 111, 108, 32, 115, 104, 101, 100, 0 };
const uint8_t loctxt_10[] = {
42, 83, 111, 114, 114, 121, 44, 32, 116, 111, 32, 101, 120, 112, 108, 111, 114, 101, 32, 80, 105, 114, 97, 116, 101, 39, 115, 32, 73, 115, 108, 101, 32, 121, 111, 117, 39, 108, 108, 32, 110, 101, 101, 100, 32, 65, 100, 118, 101, 110, 116, 117, 114, 101, 32, 35, 50, 0 };
const uint8_t loctxt_11[] = {
115, 101, 97, 0 };
const uint8_t loctxt_12[] = {
42, 73, 39, 109, 32, 117, 110, 100, 101, 114, 115, 101, 97, 0 };
const uint8_t loctxt_13[] = {
115, 109, 117, 103, 103, 108, 101, 114, 115, 32, 104, 111, 108, 100, 32, 105, 110, 115, 105, 100, 101, 32, 115, 104, 105, 112, 0 };
const uint8_t loctxt_14[] = {
104, 97, 108, 108, 0 };
const uint8_t loctxt_15[] = {
42, 73, 39, 109, 32, 111, 110, 32, 97, 32, 114, 111, 99, 107, 121, 32, 98, 101, 97, 99, 104, 32, 98, 121, 32, 115, 101, 97, 0 };
const uint8_t loctxt_16[] = {
116, 111, 112, 32, 98, 117, 110, 107, 0 };
const uint8_t loctxt_17[] = {
42, 73, 39, 109, 32, 111, 110, 32, 116, 104, 101, 32, 101, 110, 103, 105, 110, 101, 0 };
const uint8_t loctxt_18[] = {
42, 73, 39, 109, 32, 105, 110, 32, 97, 110, 32, 101, 110, 103, 105, 110, 101, 32, 114, 111, 111, 109, 0 };
const uint8_t loctxt_19[] = {
42, 73, 39, 109, 32, 111, 110, 32, 99, 97, 116, 119, 97, 108, 107, 32, 111, 110, 32, 111, 117, 116, 115, 105, 100, 101, 32, 111, 102, 32, 115, 104, 105, 112, 32, 98, 121, 32, 112, 111, 114, 116, 104, 111, 108, 101, 0 };
const uint8_t loctxt_20[] = {
110, 97, 114, 114, 111, 119, 32, 99, 114, 97, 119, 108, 119, 97, 121, 0 };
const uint8_t loctxt_21[] = {
115, 104, 105, 112, 39, 115, 32, 104, 111, 108, 100, 0 };
const uint8_t loctxt_22[] = {
42, 73, 39, 109, 32, 111, 110, 32, 98, 101, 97, 109, 32, 117, 110, 100, 101, 114, 32, 100, 111, 99, 107, 0 };
const uint8_t loctxt_23[] = {
115, 117, 110, 107, 101, 110, 32, 115, 104, 105, 112, 0 };
const uint8_t loctxt_24[] = {
78, 101, 118, 101, 114, 32, 78, 101, 118, 101, 114, 32, 76, 97, 110, 100, 0 };


const struct location locdata[] = {
		{ loctxt_0,  { 0, 0, 0, 0, 0, 0 } }, 
		{ loctxt_1,  { 0, 0, 0, 0, 0, 0 } }, 
		{ loctxt_2,  { 0, 0, 0, 0, 4, 18 } }, 
		{ loctxt_3,  { 5, 0, 0, 0, 0, 0 } }, 
		{ loctxt_4,  { 0, 0, 0, 0, 0, 2 } }, 
		{ loctxt_5,  { 0, 3, 15, 0, 0, 0 } }, 
		{ loctxt_6,  { 0, 0, 0, 0, 0, 5 } }, 
		{ loctxt_7,  { 0, 0, 0, 0, 0, 10 } }, 
		{ loctxt_8,  { 0, 0, 0, 14, 0, 0 } }, 
		{ loctxt_9,  { 8, 0, 0, 0, 0, 0 } }, 
		{ loctxt_10,  { 0, 0, 0, 0, 7, 0 } }, 
		{ loctxt_11,  { 0, 0, 0, 0, 0, 0 } }, 
		{ loctxt_12,  { 0, 0, 0, 0, 0, 0 } }, 
		{ loctxt_13,  { 0, 0, 0, 0, 0, 0 } }, 
		{ loctxt_14,  { 0, 0, 8, 0, 0, 0 } }, 
		{ loctxt_15,  { 0, 0, 0, 5, 0, 0 } }, 
		{ loctxt_16,  { 0, 0, 0, 0, 0, 2 } }, 
		{ loctxt_17,  { 0, 0, 0, 0, 0, 18 } }, 
		{ loctxt_18,  { 0, 0, 0, 0, 2, 0 } }, 
		{ loctxt_19,  { 0, 0, 0, 0, 0, 0 } }, 
		{ loctxt_20,  { 0, 0, 21, 13, 0, 0 } }, 
		{ loctxt_21,  { 0, 0, 0, 20, 0, 0 } }, 
		{ loctxt_22,  { 0, 0, 0, 0, 0, 11 } }, 
		{ loctxt_23,  { 0, 0, 0, 0, 12, 0 } }, 
		{ loctxt_24,  { 0, 0, 0, 0, 0, 0 } }, 
};
const uint8_t objinit[] = {
	7,
	2,
	0,
	5,
	0,
	8,
	9,
	7,
	0,
	0,
	0,
	0,
	2,
	0,
	0,
	0,
	2,
	16,
	0,
	0,
	0,
	0,
	0,
	0,
	0,
	3,
	0,
	0,
	0,
	0,
	13,
	21,
	4,
	4,
	0,
	12,
	0,
	16,
	11,
	12,
	0,
	0,
	21,
	3,
	0,
	2,
	0,
	2,
	0,
	0,
	0,
	0,
	0,
	13,
	0,
	0,
	0,
	19,
	0,
	2,
	0,
	0,
	0,
	0,
	23,
	22,
	0,
	0,
	0,
	0,
	0,
	0,
};


const uint8_t objtxt_0[] = {
78, 97, 114, 114, 111, 119, 32, 99, 114, 97, 99, 107, 32, 105, 110, 32, 114, 111, 99, 107, 0 };
const uint8_t objtxt_1[] = {
71, 108, 97, 115, 115, 101, 115, 0 };
const uint8_t objtxt_2[] = {
119, 104, 105, 99, 104, 32, 73, 39, 109, 32, 119, 101, 97, 114, 105, 110, 103, 0 };
const uint8_t objtxt_3[] = {
83, 105, 103, 110, 0 };
const uint8_t objtxt_4[] = {
73, 115, 108, 101, 32, 111, 102, 102, 32, 105, 110, 32, 100, 105, 115, 116, 97, 110, 99, 101, 0 };
const uint8_t objtxt_5[] = {
84, 111, 111, 108, 115, 104, 101, 100, 0 };
const uint8_t objtxt_6[] = {
72, 97, 109, 109, 101, 114, 0 };
const uint8_t objtxt_7[] = {
83, 108, 101, 101, 112, 105, 110, 103, 32, 80, 105, 114, 97, 116, 101, 0 };
const uint8_t objtxt_8[] = {
66, 111, 120, 0 };
const uint8_t objtxt_9[] = {
46, 0 };
const uint8_t objtxt_10[] = {
42, 82, 97, 114, 101, 32, 83, 116, 97, 109, 112, 115, 42, 0 };
const uint8_t objtxt_11[] = {
42, 68, 111, 117, 98, 108, 111, 111, 110, 115, 42, 0 };
const uint8_t objtxt_12[] = {
80, 97, 105, 110, 116, 105, 110, 103, 0 };
const uint8_t objtxt_13[] = {
80, 105, 99, 116, 117, 114, 101, 32, 70, 114, 97, 109, 101, 0 };
const uint8_t objtxt_14[] = {
80, 105, 99, 116, 117, 114, 101, 0 };
const uint8_t objtxt_15[] = {
77, 97, 112, 0 };
const uint8_t objtxt_16[] = {
66, 117, 110, 107, 32, 98, 101, 100, 0 };
const uint8_t objtxt_17[] = {
70, 97, 99, 101, 32, 109, 97, 115, 107, 0 };
const uint8_t objtxt_18[] = {
119, 104, 105, 99, 104, 32, 73, 39, 109, 32, 119, 101, 97, 114, 105, 110, 103, 0 };
const uint8_t objtxt_19[] = {
87, 105, 114, 101, 32, 114, 105, 109, 0 };
const uint8_t objtxt_20[] = {
76, 101, 110, 115, 101, 115, 0 };
const uint8_t objtxt_21[] = {
82, 101, 100, 32, 97, 108, 103, 97, 101, 0 };
const uint8_t objtxt_22[] = {
71, 108, 117, 101, 0 };
const uint8_t objtxt_23[] = {
42, 80, 105, 101, 99, 101, 32, 111, 102, 32, 65, 109, 98, 101, 114, 42, 0 };
const uint8_t objtxt_24[] = {
66, 111, 111, 107, 108, 101, 116, 0 };
const uint8_t objtxt_25[] = {
83, 101, 97, 0 };
const uint8_t objtxt_26[] = {
68, 111, 99, 107, 32, 116, 111, 32, 116, 104, 101, 32, 69, 97, 115, 116, 0 };
const uint8_t objtxt_27[] = {
85, 110, 100, 101, 114, 115, 105, 100, 101, 32, 111, 102, 32, 68, 111, 99, 107, 0 };
const uint8_t objtxt_28[] = {
66, 111, 97, 116, 32, 116, 111, 32, 116, 104, 101, 32, 87, 69, 83, 84, 0 };
const uint8_t objtxt_29[] = {
73, 110, 115, 105, 100, 101, 32, 111, 102, 32, 98, 111, 97, 116, 0 };
const uint8_t objtxt_30[] = {
80, 111, 111, 108, 32, 111, 102, 32, 119, 97, 116, 101, 114, 0 };
const uint8_t objtxt_31[] = {
65, 108, 97, 114, 109, 32, 99, 108, 111, 99, 107, 0 };
const uint8_t objtxt_32[] = {
68, 111, 99, 107, 0 };
const uint8_t objtxt_33[] = {
83, 101, 97, 0 };
const uint8_t objtxt_34[] = {
80, 117, 109, 105, 99, 101, 32, 114, 111, 99, 107, 0 };
const uint8_t objtxt_35[] = {
83, 105, 108, 116, 0 };
const uint8_t objtxt_36[] = {
82, 111, 99, 107, 121, 32, 98, 101, 97, 99, 104, 0 };
const uint8_t objtxt_37[] = {
42, 68, 105, 97, 109, 111, 110, 100, 32, 119, 97, 116, 99, 104, 42, 0 };
const uint8_t objtxt_38[] = {
83, 116, 114, 97, 110, 103, 101, 32, 99, 117, 114, 114, 101, 110, 116, 0 };
const uint8_t objtxt_39[] = {
83, 116, 114, 97, 110, 103, 101, 32, 99, 117, 114, 114, 101, 110, 116, 0 };
const uint8_t objtxt_40[] = {
70, 108, 111, 116, 115, 97, 109, 32, 38, 32, 74, 101, 116, 115, 97, 109, 0 };
const uint8_t objtxt_41[] = {
82, 117, 109, 0 };
const uint8_t objtxt_42[] = {
83, 105, 103, 110, 0 };
const uint8_t objtxt_43[] = {
66, 111, 97, 116, 0 };
const uint8_t objtxt_44[] = {
79, 121, 115, 116, 101, 114, 0 };
const uint8_t objtxt_45[] = {
80, 111, 114, 116, 104, 111, 108, 101, 0 };
const uint8_t objtxt_46[] = {
70, 97, 110, 32, 98, 108, 97, 100, 101, 0 };
const uint8_t objtxt_47[] = {
72, 101, 108, 109, 0 };
const uint8_t objtxt_48[] = {
79, 112, 101, 110, 32, 112, 111, 114, 116, 104, 111, 108, 101, 0 };
const uint8_t objtxt_49[] = {
83, 99, 114, 101, 119, 100, 114, 105, 118, 101, 114, 0 };
const uint8_t objtxt_50[] = {
82, 117, 105, 110, 101, 100, 32, 119, 97, 116, 101, 114, 115, 111, 97, 107, 101, 100, 32, 112, 97, 105, 110, 116, 105, 110, 103, 0 };
const uint8_t objtxt_51[] = {
42, 82, 101, 109, 98, 114, 97, 110, 100, 116, 32, 80, 97, 105, 110, 116, 105, 110, 103, 42, 0 };
const uint8_t objtxt_52[] = {
80, 105, 114, 97, 116, 101, 32, 97, 116, 32, 104, 101, 108, 109, 0 };
const uint8_t objtxt_53[] = {
86, 101, 114, 121, 32, 110, 97, 114, 114, 111, 119, 32, 99, 114, 97, 119, 108, 119, 97, 121, 0 };
const uint8_t objtxt_54[] = {
87, 97, 115, 104, 101, 100, 32, 111, 117, 116, 32, 115, 105, 103, 110, 0 };
const uint8_t objtxt_55[] = {
42, 71, 111, 108, 100, 32, 69, 97, 114, 114, 105, 110, 103, 42, 0 };
const uint8_t objtxt_56[] = {
42, 82, 97, 114, 101, 32, 66, 111, 111, 107, 42, 0 };
const uint8_t objtxt_57[] = {
79, 105, 108, 115, 107, 105, 110, 32, 114, 97, 105, 110, 99, 111, 97, 116, 0 };
const uint8_t objtxt_58[] = {
87, 97, 116, 101, 114, 112, 114, 111, 111, 102, 32, 112, 97, 105, 110, 116, 105, 110, 103, 0 };
const uint8_t objtxt_59[] = {
67, 101, 105, 108, 105, 110, 103, 32, 102, 97, 110, 0 };
const uint8_t objtxt_60[] = {
42, 68, 105, 97, 109, 111, 110, 100, 32, 66, 114, 111, 111, 99, 104, 42, 0 };
const uint8_t objtxt_61[] = {
83, 109, 97, 108, 108, 32, 98, 117, 116, 116, 111, 110, 32, 105, 110, 32, 99, 101, 105, 108, 105, 110, 103, 0 };
const uint8_t objtxt_62[] = {
87, 97, 116, 101, 114, 115, 111, 97, 107, 101, 100, 32, 98, 111, 111, 107, 0 };
const uint8_t objtxt_63[] = {
83, 117, 110, 107, 101, 110, 32, 83, 104, 105, 112, 0 };
const uint8_t objtxt_64[] = {
42, 74, 101, 119, 101, 108, 101, 100, 32, 99, 104, 101, 115, 116, 42, 0 };
const uint8_t objtxt_65[] = {
42, 83, 105, 108, 118, 101, 114, 32, 68, 111, 108, 108, 97, 114, 42, 0 };
const uint8_t objtxt_66[] = {
42, 80, 101, 97, 114, 108, 42, 0 };
const uint8_t objtxt_67[] = {
83, 110, 97, 105, 108, 0 };
const uint8_t objtxt_68[] = {
68, 101, 97, 100, 32, 115, 110, 97, 105, 108, 0 };
const uint8_t objtxt_69[] = {
42, 68, 105, 97, 109, 111, 110, 100, 32, 80, 105, 110, 42, 0 };
const uint8_t objtxt_70[] = {
42, 68, 105, 97, 109, 111, 110, 100, 32, 82, 105, 110, 103, 42, 0 };
const uint8_t objtxt_71[] = {
83, 109, 97, 115, 104, 101, 100, 32, 79, 121, 115, 116, 101, 114, 0 };


const uint8_t *objtext[] = {
	objtxt_0,
	objtxt_1,
	objtxt_2,
	objtxt_3,
	objtxt_4,
	objtxt_5,
	objtxt_6,
	objtxt_7,
	objtxt_8,
	objtxt_9,
	objtxt_10,
	objtxt_11,
	objtxt_12,
	objtxt_13,
	objtxt_14,
	objtxt_15,
	objtxt_16,
	objtxt_17,
	objtxt_18,
	objtxt_19,
	objtxt_20,
	objtxt_21,
	objtxt_22,
	objtxt_23,
	objtxt_24,
	objtxt_25,
	objtxt_26,
	objtxt_27,
	objtxt_28,
	objtxt_29,
	objtxt_30,
	objtxt_31,
	objtxt_32,
	objtxt_33,
	objtxt_34,
	objtxt_35,
	objtxt_36,
	objtxt_37,
	objtxt_38,
	objtxt_39,
	objtxt_40,
	objtxt_41,
	objtxt_42,
	objtxt_43,
	objtxt_44,
	objtxt_45,
	objtxt_46,
	objtxt_47,
	objtxt_48,
	objtxt_49,
	objtxt_50,
	objtxt_51,
	objtxt_52,
	objtxt_53,
	objtxt_54,
	objtxt_55,
	objtxt_56,
	objtxt_57,
	objtxt_58,
	objtxt_59,
	objtxt_60,
	objtxt_61,
	objtxt_62,
	objtxt_63,
	objtxt_64,
	objtxt_65,
	objtxt_66,
	objtxt_67,
	objtxt_68,
	objtxt_69,
	objtxt_70,
	objtxt_71,
};
const uint8_t msgtxt_0[] = {
0 };
const uint8_t msgtxt_1[] = {
79, 46, 75, 46, 0 };
const uint8_t msgtxt_2[] = {
65, 100, 118, 101, 110, 116, 117, 114, 101, 32, 49, 52, 32, 98, 121, 32, 83, 99, 111, 116, 116, 32, 65, 100, 97, 109, 115, 46, 0 };
const uint8_t msgtxt_3[] = {
83, 111, 114, 114, 121, 44, 0 };
const uint8_t msgtxt_4[] = {
69, 118, 101, 114, 121, 116, 104, 105, 110, 103, 32, 105, 115, 0 };
const uint8_t msgtxt_5[] = {
110, 111, 116, 32, 101, 120, 97, 99, 116, 108, 121, 32, 100, 97, 114, 107, 44, 32, 98, 117, 116, 32, 105, 116, 39, 115, 32, 116, 111, 111, 32, 70, 85, 90, 90, 89, 32, 116, 111, 32, 115, 101, 101, 33, 0 };
const uint8_t msgtxt_6[] = {
87, 101, 108, 99, 111, 109, 101, 32, 116, 111, 32, 66, 97, 99, 107, 115, 105, 100, 101, 32, 111, 102, 32, 80, 105, 114, 97, 116, 101, 39, 115, 32, 73, 115, 108, 101, 46, 0 };
const uint8_t msgtxt_7[] = {
73, 32, 115, 101, 101, 0 };
const uint8_t msgtxt_8[] = {
73, 32, 109, 97, 100, 101, 32, 105, 116, 46, 0 };
const uint8_t msgtxt_9[] = {
73, 32, 102, 97, 108, 108, 46, 0 };
const uint8_t msgtxt_10[] = {
115, 111, 109, 101, 116, 104, 105, 110, 103, 0 };
const uint8_t msgtxt_11[] = {
97, 32, 102, 114, 97, 109, 101, 100, 32, 112, 97, 105, 110, 116, 105, 110, 103, 32, 111, 102, 32, 66, 108, 97, 99, 107, 98, 101, 97, 114, 100, 46, 0 };
const uint8_t msgtxt_12[] = {
109, 97, 112, 32, 111, 110, 32, 98, 97, 99, 107, 0 };
const uint8_t msgtxt_13[] = {
119, 114, 105, 116, 105, 110, 103, 0 };
const uint8_t msgtxt_14[] = {
83, 97, 105, 108, 105, 110, 103, 32, 114, 111, 117, 116, 101, 32, 116, 111, 32, 84, 82, 69, 65, 83, 85, 82, 69, 33, 0 };
const uint8_t msgtxt_15[] = {
65, 114, 103, 104, 33, 0 };
const uint8_t msgtxt_16[] = {
73, 32, 100, 114, 111, 119, 110, 101, 100, 46, 0 };
const uint8_t msgtxt_17[] = {
73, 32, 98, 114, 101, 97, 116, 104, 101, 100, 46, 0 };
const uint8_t msgtxt_18[] = {
108, 101, 110, 115, 101, 115, 32, 38, 32, 119, 105, 114, 101, 32, 114, 105, 109, 46, 0 };
const uint8_t msgtxt_19[] = {
105, 116, 39, 115, 32, 34, 71, 108, 111, 105, 111, 112, 101, 108, 116, 105, 115, 32, 70, 117, 114, 99, 97, 116, 97, 34, 32, 111, 114, 32, 70, 117, 110, 111, 114, 105, 46, 0 };
const uint8_t msgtxt_20[] = {
104, 111, 119, 32, 116, 111, 32, 109, 97, 107, 101, 32, 103, 108, 117, 101, 32, 102, 114, 111, 109, 32, 70, 117, 110, 111, 114, 105, 46, 0 };
const uint8_t msgtxt_21[] = {
73, 32, 102, 111, 117, 110, 100, 0 };
const uint8_t msgtxt_22[] = {
38, 32, 73, 32, 103, 111, 116, 32, 105, 116, 33, 0 };
const uint8_t msgtxt_23[] = {
105, 110, 32, 116, 104, 101, 32, 119, 97, 121, 46, 0 };
const uint8_t msgtxt_24[] = {
71, 108, 97, 115, 115, 101, 115, 32, 115, 108, 105, 112, 32, 111, 102, 102, 46, 0 };
const uint8_t msgtxt_25[] = {
73, 110, 32, 50, 32, 119, 111, 114, 100, 115, 32, 116, 101, 108, 108, 32, 109, 101, 32, 116, 111, 32, 111, 114, 32, 105, 110, 32, 119, 104, 97, 116, 46, 0 };
const uint8_t msgtxt_26[] = {
73, 32, 99, 97, 110, 39, 116, 44, 0 };
const uint8_t msgtxt_27[] = {
72, 85, 72, 63, 0 };
const uint8_t msgtxt_28[] = {
98, 111, 97, 116, 39, 115, 32, 98, 111, 116, 116, 111, 109, 46, 0 };
const uint8_t msgtxt_29[] = {
104, 97, 112, 112, 101, 110, 115, 46, 0 };
const uint8_t msgtxt_30[] = {
110, 111, 116, 104, 105, 110, 103, 0 };
const uint8_t msgtxt_31[] = {
115, 112, 101, 99, 105, 97, 108, 46, 0 };
const uint8_t msgtxt_32[] = {
73, 32, 104, 101, 97, 114, 0 };
const uint8_t msgtxt_33[] = {
97, 110, 32, 97, 108, 97, 114, 109, 32, 99, 108, 111, 99, 107, 32, 114, 105, 110, 103, 105, 110, 103, 32, 115, 111, 109, 101, 119, 104, 101, 114, 101, 46, 0 };
const uint8_t msgtxt_34[] = {
105, 116, 39, 115, 32, 99, 111, 118, 101, 114, 101, 100, 32, 105, 110, 32, 97, 108, 103, 97, 101, 0 };
const uint8_t msgtxt_35[] = {
77, 111, 118, 101, 32, 110, 117, 109, 98, 101, 114, 58, 0 };
const uint8_t msgtxt_36[] = {
76, 101, 97, 118, 101, 32, 42, 84, 82, 69, 65, 83, 85, 82, 69, 83, 42, 32, 104, 101, 114, 101, 46, 32, 83, 67, 79, 82, 69, 46, 0 };
const uint8_t msgtxt_37[] = {
112, 105, 108, 105, 110, 103, 115, 46, 0 };
const uint8_t msgtxt_38[] = {
77, 121, 32, 109, 97, 115, 107, 39, 115, 32, 102, 111, 103, 103, 101, 100, 32, 117, 112, 33, 0 };
const uint8_t msgtxt_39[] = {
73, 32, 115, 116, 105, 114, 114, 101, 100, 32, 105, 116, 32, 117, 112, 46, 0 };
const uint8_t msgtxt_40[] = {
73, 32, 111, 112, 101, 110, 101, 100, 32, 117, 112, 32, 97, 0 };
const uint8_t msgtxt_41[] = {
73, 32, 100, 111, 110, 39, 116, 32, 107, 110, 111, 119, 32, 119, 104, 101, 114, 101, 32, 105, 116, 32, 105, 115, 46, 0 };
const uint8_t msgtxt_42[] = {
73, 32, 121, 97, 119, 110, 32, 38, 32, 115, 116, 114, 101, 116, 99, 104, 33, 0 };
const uint8_t msgtxt_43[] = {
77, 97, 116, 116, 114, 101, 115, 115, 32, 105, 115, 32, 115, 111, 102, 116, 46, 0 };
const uint8_t msgtxt_44[] = {
72, 111, 119, 63, 0 };
const uint8_t msgtxt_45[] = {
105, 116, 32, 102, 111, 108, 108, 111, 119, 115, 32, 109, 101, 33, 0 };
const uint8_t msgtxt_46[] = {
73, 32, 97, 109, 46, 0 };
const uint8_t msgtxt_47[] = {
103, 108, 97, 115, 115, 101, 115, 0 };
const uint8_t msgtxt_48[] = {
83, 119, 105, 109, 32, 100, 111, 119, 110, 63, 0 };
const uint8_t msgtxt_49[] = {
77, 121, 32, 109, 97, 115, 107, 39, 115, 32, 102, 117, 108, 108, 32, 111, 102, 32, 119, 97, 116, 101, 114, 46, 0 };
const uint8_t msgtxt_50[] = {
98, 121, 32, 101, 100, 103, 101, 115, 32, 111, 116, 104, 101, 114, 32, 112, 105, 99, 116, 117, 114, 101, 32, 105, 115, 32, 118, 105, 115, 105, 98, 108, 101, 32, 98, 101, 110, 101, 97, 116, 104, 33, 32, 73, 32, 99, 108, 101, 97, 110, 101, 100, 32, 116, 111, 112, 32, 111, 110, 101, 32, 111, 102, 102, 33, 0 };
const uint8_t msgtxt_51[] = {
78, 111, 32, 109, 97, 112, 33, 0 };
const uint8_t msgtxt_52[] = {
78, 111, 32, 99, 114, 101, 119, 32, 104, 101, 114, 101, 33, 0 };
const uint8_t msgtxt_53[] = {
80, 105, 114, 97, 116, 101, 32, 100, 114, 105, 110, 107, 115, 32, 114, 117, 109, 32, 38, 32, 104, 101, 97, 100, 115, 32, 116, 111, 32, 119, 111, 114, 107, 46, 0 };
const uint8_t msgtxt_54[] = {
80, 105, 114, 97, 116, 101, 32, 108, 111, 111, 107, 115, 32, 97, 114, 111, 117, 110, 100, 32, 101, 120, 112, 101, 99, 116, 97, 110, 116, 108, 121, 32, 38, 32, 115, 97, 121, 115, 32, 34, 77, 97, 116, 101, 121, 44, 32, 121, 111, 117, 32, 98, 101, 32, 102, 111, 114, 103, 101, 116, 102, 117, 108, 32, 102, 111, 114, 32, 115, 117, 114, 101, 33, 34, 32, 38, 32, 116, 104, 101, 110, 32, 104, 101, 32, 115, 117, 108, 107, 115, 32, 111, 102, 102, 32, 97, 110, 103, 114, 105, 108, 121, 33, 0 };
const uint8_t msgtxt_55[] = {
80, 105, 114, 97, 116, 101, 32, 119, 111, 110, 39, 116, 32, 108, 101, 116, 32, 109, 101, 46, 0 };
const uint8_t msgtxt_56[] = {
82, 111, 119, 63, 0 };
const uint8_t msgtxt_57[] = {
116, 111, 111, 32, 104, 101, 97, 118, 121, 46, 0 };
const uint8_t msgtxt_58[] = {
84, 114, 121, 32, 73, 78, 86, 69, 78, 84, 79, 82, 89, 32, 111, 114, 32, 76, 79, 79, 75, 0 };
const uint8_t msgtxt_59[] = {
116, 104, 101, 32, 108, 105, 116, 116, 108, 101, 32, 115, 99, 114, 101, 119, 115, 33, 0 };
const uint8_t msgtxt_60[] = {
116, 104, 101, 114, 101, 39, 115, 32, 110, 111, 32, 109, 97, 116, 116, 114, 101, 115, 115, 32, 104, 101, 114, 101, 46, 0 };
const uint8_t msgtxt_61[] = {
119, 111, 110, 39, 116, 32, 102, 105, 116, 46, 0 };
const uint8_t msgtxt_62[] = {
73, 39, 118, 101, 32, 115, 116, 111, 114, 101, 100, 32, 48, 32, 116, 114, 101, 97, 115, 117, 114, 101, 115, 46, 0 };
const uint8_t msgtxt_63[] = {
70, 111, 114, 32, 109, 121, 32, 77, 111, 109, 33, 0 };
const uint8_t msgtxt_64[] = {
105, 116, 39, 115, 32, 111, 110, 32, 116, 104, 101, 32, 115, 104, 105, 112, 32, 115, 111, 109, 101, 119, 104, 101, 114, 101, 46, 0 };
const uint8_t msgtxt_65[] = {
105, 116, 39, 115, 32, 111, 110, 32, 79, 112, 104, 116, 104, 97, 108, 109, 111, 108, 111, 103, 121, 46, 32, 83, 113, 117, 105, 110, 116, 105, 110, 103, 32, 99, 97, 110, 32, 104, 101, 108, 112, 32, 119, 105, 116, 104, 32, 77, 121, 111, 112, 105, 97, 46, 0 };
const uint8_t msgtxt_66[] = {
73, 116, 39, 115, 32, 111, 100, 100, 33, 0 };
const uint8_t msgtxt_67[] = {
71, 111, 111, 100, 32, 105, 100, 101, 97, 33, 32, 66, 117, 116, 32, 46, 46, 46, 0 };
const uint8_t msgtxt_68[] = {
87, 104, 121, 32, 98, 111, 116, 104, 101, 114, 63, 0 };
const uint8_t msgtxt_69[] = {
73, 32, 108, 111, 115, 116, 0 };
const uint8_t msgtxt_70[] = {
97, 32, 115, 104, 105, 112, 32, 119, 105, 116, 104, 32, 102, 108, 111, 111, 100, 108, 105, 103, 104, 116, 115, 32, 108, 105, 116, 0 };
const uint8_t msgtxt_71[] = {
116, 104, 101, 32, 102, 97, 110, 39, 115, 32, 116, 117, 114, 110, 105, 110, 103, 46, 0 };
const uint8_t msgtxt_72[] = {
108, 97, 114, 103, 101, 32, 98, 108, 97, 100, 101, 32, 102, 97, 110, 32, 104, 97, 115, 32, 115, 116, 111, 112, 112, 101, 100, 46, 0 };
const uint8_t msgtxt_73[] = {
98, 97, 116, 116, 101, 114, 121, 39, 115, 32, 100, 101, 97, 100, 33, 0 };
const uint8_t msgtxt_74[] = {
98, 114, 105, 103, 104, 116, 108, 121, 46, 0 };
const uint8_t msgtxt_75[] = {
100, 105, 109, 108, 121, 46, 0 };
const uint8_t msgtxt_76[] = {
110, 111, 116, 32, 97, 116, 32, 97, 108, 108, 33, 0 };
const uint8_t msgtxt_77[] = {
67, 108, 105, 99, 107, 33, 0 };
const uint8_t msgtxt_78[] = {
97, 109, 112, 115, 32, 108, 101, 102, 116, 46, 0 };
const uint8_t msgtxt_79[] = {
80, 105, 114, 97, 116, 101, 32, 115, 97, 121, 115, 58, 0 };
const uint8_t msgtxt_80[] = {
105, 116, 39, 115, 32, 85, 114, 111, 115, 97, 108, 112, 105, 110, 120, 32, 67, 105, 110, 101, 114, 97, 46, 0 };
const uint8_t msgtxt_81[] = {
79, 121, 115, 116, 101, 114, 32, 68, 114, 105, 108, 108, 32, 100, 111, 101, 115, 32, 116, 104, 101, 32, 116, 114, 105, 99, 107, 33, 0 };
const uint8_t msgtxt_82[] = {
76, 105, 100, 32, 98, 114, 111, 107, 101, 32, 111, 102, 102, 33, 0 };
const uint8_t msgtxt_83[] = {
73, 39, 109, 32, 110, 111, 32, 115, 97, 105, 108, 111, 114, 33, 0 };
const uint8_t msgtxt_84[] = {
102, 108, 111, 111, 100, 108, 105, 103, 104, 116, 115, 32, 108, 105, 116, 0 };
const uint8_t msgtxt_85[] = {
76, 111, 110, 103, 32, 116, 114, 105, 112, 44, 32, 110, 105, 103, 104, 116, 32, 102, 101, 108, 108, 33, 0 };
const uint8_t msgtxt_86[] = {
79, 117, 116, 32, 111, 102, 32, 103, 97, 115, 33, 0 };
const uint8_t msgtxt_87[] = {
38, 32, 108, 111, 115, 116, 32, 97, 116, 32, 115, 101, 97, 33, 0 };
const uint8_t msgtxt_88[] = {
76, 105, 116, 101, 114, 115, 32, 108, 101, 102, 116, 46, 0 };
const uint8_t msgtxt_89[] = {
108, 97, 114, 103, 101, 32, 111, 112, 101, 110, 105, 110, 103, 46, 0 };
const uint8_t *msgptr[] = {
	msgtxt_0,
	msgtxt_1,
	msgtxt_2,
	msgtxt_3,
	msgtxt_4,
	msgtxt_5,
	msgtxt_6,
	msgtxt_7,
	msgtxt_8,
	msgtxt_9,
	msgtxt_10,
	msgtxt_11,
	msgtxt_12,
	msgtxt_13,
	msgtxt_14,
	msgtxt_15,
	msgtxt_16,
	msgtxt_17,
	msgtxt_18,
	msgtxt_19,
	msgtxt_20,
	msgtxt_21,
	msgtxt_22,
	msgtxt_23,
	msgtxt_24,
	msgtxt_25,
	msgtxt_26,
	msgtxt_27,
	msgtxt_28,
	msgtxt_29,
	msgtxt_30,
	msgtxt_31,
	msgtxt_32,
	msgtxt_33,
	msgtxt_34,
	msgtxt_35,
	msgtxt_36,
	msgtxt_37,
	msgtxt_38,
	msgtxt_39,
	msgtxt_40,
	msgtxt_41,
	msgtxt_42,
	msgtxt_43,
	msgtxt_44,
	msgtxt_45,
	msgtxt_46,
	msgtxt_47,
	msgtxt_48,
	msgtxt_49,
	msgtxt_50,
	msgtxt_51,
	msgtxt_52,
	msgtxt_53,
	msgtxt_54,
	msgtxt_55,
	msgtxt_56,
	msgtxt_57,
	msgtxt_58,
	msgtxt_59,
	msgtxt_60,
	msgtxt_61,
	msgtxt_62,
	msgtxt_63,
	msgtxt_64,
	msgtxt_65,
	msgtxt_66,
	msgtxt_67,
	msgtxt_68,
	msgtxt_69,
	msgtxt_70,
	msgtxt_71,
	msgtxt_72,
	msgtxt_73,
	msgtxt_74,
	msgtxt_75,
	msgtxt_76,
	msgtxt_77,
	msgtxt_78,
	msgtxt_79,
	msgtxt_80,
	msgtxt_81,
	msgtxt_82,
	msgtxt_83,
	msgtxt_84,
	msgtxt_85,
	msgtxt_86,
	msgtxt_87,
	msgtxt_88,
	msgtxt_89,
};


const uint8_t status[] = {
/* AUTO  100  	*/
	181, 
	8, 3, 8, 29, 9, 16, 0, 3, 0, 31, 
	60, 58, 
/* AUTO  100  	*/
	177, 
	8, 31, 9, 29, 0, 3, 0, 31, 
	58, 60, 
/* AUTO  100  	*/
	168, 
	8, 29, 16, 0, 
	77, 
/* AUTO  100  	*/
	176, 
	8, 4, 1, 10, 0, 10, 0, 14, 
	62, 
/* AUTO  100  	*/
	168, 
	9, 2, 9, 3, 
	57, 
/* AUTO  8    	*/
	149, 8, 
	9, 21, 1, 18, 9, 22, 0, 22, 0, 18, 
	58, 60, 
/* AUTO  100  	*/
	176, 
	1, 67, 9, 5, 0, 67, 0, 68, 
	72, 
/* AUTO  100  	*/
	174, 
	0, 1, 0, 1, 0, 1, 
	81, 82, 81, 
/* AUTO  100  	*/
	174, 
	9, 1, 0, 40, 0, 3, 
	79, 81, 73, 
/* AUTO  0    	*/
	195, 
	56, 70, 64, 2, 
/* AUTO  0    	*/
	207, 
	0, 1, 0, 2, 0, 18, 
	58, 58, 58, 113, 
/* AUTO  0    	*/
	211, 
	0, 1, 0, 0, 0, 1, 0, 20, 
	81, 79, 81, 79, 
/* AUTO  100  	*/
	172, 
	4, 13, 2, 42, 0, 25, 
	58, 
/* AUTO  100  	*/
	172, 
	8, 5, 1, 12, 0, 24, 
	58, 
/* AUTO  100  	*/
	172, 
	8, 5, 1, 14, 0, 24, 
	58, 
/* AUTO  100  	*/
	172, 
	8, 5, 1, 51, 0, 24, 
	58, 
/* AUTO  100  	*/
	180, 
	8, 24, 13, 51, 14, 50, 0, 50, 0, 51, 
	72, 
/* AUTO  100  	*/
	181, 
	3, 17, 6, 18, 8, 4, 0, 22, 0, 23, 
	60, 58, 
/* AUTO  100  	*/
	168, 
	1, 31, 0, 19, 
	58, 
/* AUTO  100  	*/
	172, 
	4, 13, 5, 42, 0, 25, 
	60, 
/* AUTO  100  	*/
	173, 
	9, 13, 13, 63, 0, 63, 
	59, 76, 
/* AUTO  100  	*/
	174, 
	8, 6, 0, 2, 0, 1, 
	81, 83, 73, 
/* AUTO  0    	*/
	196, 
	15, 3, 
	15, 
/* AUTO  0    	*/
	210, 
	15, 0, 9, 4, 0, 6, 0, 17, 
	17, 60, 60, 
/* AUTO  0    	*/
	196, 
	0, 2, 
	81, 
/* AUTO  100  	*/
	183, 
	8, 4, 1, 2, 0, 2, 0, 2, 0, 18, 
	55, 58, 60, 73, 
/* AUTO  0    	*/
	193, 
	70, 24, 
/* AUTO  100  	*/
	183, 
	9, 4, 0, 10, 0, 11, 0, 12, 0, 13, 
	60, 60, 60, 60, 
/* AUTO  100  	*/
	173, 
	9, 4, 0, 14, 0, 20, 
	60, 60, 
/* AUTO  100  	*/
	176, 
	8, 5, 1, 42, 0, 42, 0, 54, 
	72, 
/* AUTO  100  	*/
	181, 
	8, 13, 8, 4, 14, 32, 4, 12, 0, 63, 
	53, 76, 
/* AUTO  100  	*/
	183, 
	8, 23, 1, 18, 0, 2, 0, 22, 0, 18, 
	49, 58, 60, 60, 
/* AUTO  100  	*/
	174, 
	8, 22, 1, 18, 0, 2, 
	38, 58, 56, 
/* AUTO  100  	*/
	176, 
	8, 5, 1, 56, 0, 62, 0, 56, 
	72, 
/* AUTO  15   	*/
	136, 15, 
	8, 2, 4, 1, 
	42, 
/* AUTO  100  	*/
	169, 
	8, 4, 9, 6, 
	16, 61, 
/* AUTO  100  	*/
	182, 
	6, 1, 1, 2, 0, 2, 0, 2, 0, 18, 
	55, 58, 60, 
/* AUTO  100  	*/
	182, 
	6, 17, 1, 18, 0, 18, 0, 2, 0, 18, 
	55, 58, 60, 
/* AUTO  100  	*/
	175, 
	9, 18, 8, 3, 0, 18, 
	56, 58, 70, 64, 
/* AUTO  100  	*/
	169, 
	9, 19, 9, 7, 
	32, 33, 
/* AUTO  100  	*/
	165, 
	8, 2, 
	4, 5, 
/* AUTO  100  	*/
	178, 
	8, 18, 9, 2, 0, 18, 9, 3, 
	57, 60, 76, 
/* AUTO  100  	*/
	174, 
	9, 18, 8, 2, 0, 18, 
	56, 58, 76, 
/* AUTO  25   	*/
	145, 25, 
	8, 4, 8, 20, 0, 20, 0, 13, 
	60, 58, 
/* AUTO  100  	*/
	173, 
	8, 29, 15, 0, 0, 29, 
	60, 79, 
/* AUTO  100  	*/
	168, 
	15, 6, 0, 27, 
	58, 
/* AUTO  100  	*/
	172, 
	16, 6, 14, 46, 0, 27, 
	60, 
/* AUTO  100  	*/
	164, 
	4, 24, 
	63, 
/* AUTO  100  	*/
	175, 
	8, 28, 0, 20, 0, 3, 
	79, 81, 77, 73, 
/* AUTO  0    	*/
	201, 
	15, 0, 0, 28, 
	60, 79, 
/* AUTO  0    	*/
	196, 
	0, 3, 
	81, 
};
const uint8_t actions[] = {
/* LOOK  IT   	*/
	14, 27, 71, 
	4, 2, 8, 2, 3, 1, 
	1, 21, 47, 
/* LOOK  ANY  	*/
	5, 27, 0, 
	8, 2, 
	3, 26, 
/* STAR  ENGI 	*/
	11, 87, 64, 
	4, 18, 15, 0, 
	3, 26, 7, 123, 
/* STAR  ENGI 	*/
	9, 87, 64, 
	4, 18, 0, 3, 
	73, 81, 
/* AUTO  0    	*/
	199, 
	15, 0, 
	3, 30, 29, 136, 
/* AUTO  0    	*/
	201, 
	16, 0, 0, 28, 
	1, 58, 
/* AUTO  0    	*/
	196, 
	0, 3, 
	81, 
/* LOOK  CHES 	*/
	10, 27, 100, 
	13, 56, 3, 64, 
	1, 7, 132, 
/* SAIL  SHIP 	*/
	10, 73, 11, 
	9, 28, 2, 52, 
	129, 44, 106, 
/* GO    PORT 	*/
	15, 1, 43, 
	13, 48, 10, 0, 6, 2, 
	3, 26, 10, 111, 
/* LOOK  PILI 	*/
	19, 27, 70, 
	8, 4, 8, 11, 14, 67, 0, 67, 
	7, 10, 22, 74, 
/* LOOK  PIRA 	*/
	5, 27, 15, 
	2, 52, 
	3, 105, 
/* LOOK  PAIN 	*/
	23, 27, 24, 
	9, 2, 13, 15, 3, 14, 0, 14, 0, 51, 
	1, 7, 50, 72, 
/* GET   UP   	*/
	4, 10, 5, 
	7, 1, 
	46, 
/* GO    PORT 	*/
	14, 1, 43, 
	4, 19, 11, 0, 0, 2, 
	1, 54, 76, 
/* GO    PORT 	*/
	14, 1, 43, 
	2, 48, 11, 0, 0, 19, 
	1, 54, 76, 
/* OPEN  PORT 	*/
	13, 57, 43, 
	0, 48, 0, 45, 2, 45, 
	1, 72, 
/* DIVE  ANY  	*/
	4, 52, 0, 
	8, 5, 
	48, 
/* CHAR  ANY  	*/
	0, 92, 0, 
	44, 
/* FEEL  ANY  	*/
	19, 24, 0, 
	8, 2, 4, 2, 2, 1, 0, 1, 
	21, 10, 22, 74, 
/* RUB   EYES 	*/
	11, 46, 61, 
	6, 2, 6, 18, 
	1, 21, 30, 23, 
/* LOOK  BATT 	*/
	7, 27, 90, 
	9, 7, 
	1, 7, 78, 128, 
/* USE   HAMM 	*/
	21, 59, 34, 
	3, 6, 3, 44, 8, 30, 0, 44, 0, 71, 
	1, 72, 
/* EMPT  MASK 	*/
	17, 77, 32, 
	3, 17, 6, 18, 8, 23, 0, 23, 
	1, 60, 
/* LOOK  EAST 	*/
	10, 27, 3, 
	8, 4, 8, 10, 
	7, 37, 23, 
/* INVE  ANY  	*/
	4, 41, 0, 
	9, 2, 
	66, 
/* GET   INVE 	*/
	4, 10, 51, 
	9, 2, 
	66, 
/* GO    ENGI 	*/
	10, 1, 64, 
	4, 18, 0, 17, 
	1, 54, 76, 
/* REMO  MASK 	*/
	15, 34, 32, 
	1, 18, 0, 18, 0, 2, 
	1, 59, 58, 56, 
/* REMO  GLAS 	*/
	15, 34, 7, 
	1, 2, 0, 2, 0, 2, 
	1, 59, 58, 56, 
/* GO    CLOC 	*/
	0, 1, 57, 
	41, 
/* CLEA  GLAS 	*/
	4, 61, 7, 
	3, 2, 
	1, 
/* FEEL  ANY  	*/
	6, 24, 0, 
	4, 16, 
	1, 7, 110, 
/* LOOK  CURR 	*/
	1, 27, 52, 
	1, 45, 
/* GO    SHIP 	*/
	14, 1, 11, 
	2, 43, 0, 4, 0, 7, 
	54, 76, 60, 
/* SCOR  ANY  	*/
	4, 71, 0, 
	8, 25, 
	65, 
/* HELP  ANY  	*/
	1, 72, 0, 
	3, 26, 
/* OPEN  EYES 	*/
	0, 57, 61, 
	1, 
/* FEEL  SILT 	*/
	19, 24, 62, 
	2, 35, 8, 14, 14, 11, 0, 11, 
	21, 10, 22, 74, 
/* DIG   ANY  	*/
	23, 43, 0, 
	3, 46, 4, 5, 14, 41, 13, 7, 0, 41, 
	21, 10, 22, 74, 
/* WAKE  PIRA 	*/
	10, 44, 15, 
	2, 7, 0, 7, 
	1, 59, 73, 
/* AUTO  0    	*/
	196, 
	5, 41, 
	104, 
/* AUTO  0    	*/
	210, 
	2, 41, 0, 41, 0, 52, 0, 47, 
	59, 72, 103, 
/* GET   BREA 	*/
	15, 10, 30, 
	9, 6, 0, 6, 0, 2, 
	1, 58, 73, 81, 
/* AUTO  0    	*/
	205, 
	8, 17, 0, 8, 0, 2, 
	79, 81, 
/* AUTO  0    	*/
	205, 
	9, 17, 0, 3, 0, 2, 
	79, 81, 
/* BREA  DEEP 	*/
	10, 45, 47, 
	0, 17, 0, 6, 
	1, 58, 60, 
/* HYPE  ANY  	*/
	10, 47, 0, 
	0, 17, 0, 6, 
	1, 58, 60, 
/* BREA  ANY  	*/
	11, 45, 0, 
	0, 6, 0, 17, 
	1, 60, 60, 17, 
/* YAWN  ANY  	*/
	2, 79, 0, 
	1, 30, 29, 
/* WEAR  GLAS 	*/
	23, 36, 7, 
	3, 1, 6, 18, 0, 1, 0, 2, 0, 2, 
	1, 74, 74, 60, 
/* READ  SIGN 	*/
	6, 86, 31, 
	3, 3, 
	1, 7, 6, 
/* JUMP  TOP  	*/
	11, 39, 66, 
	4, 6, 0, 7, 
	1, 8, 54, 76, 
/* JUMP  UP   	*/
	11, 39, 5, 
	4, 6, 0, 7, 
	1, 8, 54, 76, 
/* JUMP  ANY  	*/
	6, 39, 0, 
	4, 6, 
	1, 9, 61, 
/* JUMP  LEDG 	*/
	11, 39, 9, 
	4, 7, 0, 6, 
	1, 54, 9, 76, 
/* JUMP  ANY  	*/
	6, 39, 0, 
	4, 7, 
	1, 9, 61, 
/* JUMP  ANY  	*/
	2, 39, 0, 
	3, 30, 29, 
/* GO    CRAC 	*/
	19, 1, 13, 
	4, 7, 0, 8, 0, 3, 0, 16, 
	56, 54, 58, 58, 
/* GO    CRAC 	*/
	19, 1, 13, 
	4, 8, 0, 7, 0, 3, 0, 16, 
	54, 60, 60, 76, 
/* GO    SHED 	*/
	9, 1, 22, 
	4, 8, 0, 9, 
	1, 54, 
/* STOP  CLOC 	*/
	5, 75, 57, 
	12, 31, 
	3, 41, 
/* LOOK  SILT 	*/
	19, 27, 62, 
	3, 18, 2, 35, 0, 22, 0, 2, 
	7, 58, 58, 39, 
/* CLEA  MASK 	*/
	22, 61, 32, 
	8, 5, 3, 17, 6, 18, 0, 22, 0, 21, 
	1, 60, 60, 
/* LOOK  PIRA 	*/
	19, 27, 15, 
	3, 7, 14, 8, 14, 10, 0, 8, 
	7, 10, 22, 74, 
/* LOOK  PIRA 	*/
	15, 27, 15, 
	3, 7, 14, 55, 0, 55, 
	7, 10, 22, 74, 
/* OPEN  BOX  	*/
	19, 57, 21, 
	3, 8, 3, 6, 0, 10, 14, 10, 
	1, 7, 10, 53, 
/* REMO  FRAM 	*/
	22, 34, 17, 
	3, 12, 0, 12, 0, 13, 0, 14, 3, 49, 
	1, 72, 53, 
/* REMO  WIRE 	*/
	23, 34, 103, 
	3, 1, 3, 49, 0, 1, 0, 20, 0, 19, 
	72, 74, 119, 109, 
/* LOOK  PAIN 	*/
	11, 27, 24, 
	3, 14, 0, 15, 
	7, 12, 22, 74, 
/* LOOK  MAP  	*/
	6, 27, 76, 
	3, 15, 
	1, 7, 13, 
/* SPIT  MASK 	*/
	22, 78, 32, 
	9, 4, 3, 17, 6, 18, 0, 21, 0, 22, 
	1, 58, 60, 
/* READ  MAP  	*/
	4, 86, 76, 
	3, 15, 
	14, 
/* SWIM  OPEN 	*/
	5, 48, 44, 
	9, 0, 
	3, 26, 
/* LOOK  PAIN 	*/
	6, 27, 24, 
	3, 12, 
	1, 7, 11, 
/* GO    HILL 	*/
	10, 1, 10, 
	4, 5, 0, 6, 
	1, 54, 76, 
/* GO    BUNK 	*/
	10, 1, 28, 
	4, 2, 0, 1, 
	1, 54, 76, 
/* LOOK  SIGN 	*/
	2, 27, 31, 
	1, 7, 13, 
/* LOOK  GLAS 	*/
	6, 27, 7, 
	3, 1, 
	1, 7, 18, 
/* REMO  LENS 	*/
	23, 34, 8, 
	3, 1, 3, 49, 0, 1, 0, 20, 0, 19, 
	72, 74, 119, 109, 
/* MAKE  GLUE 	*/
	14, 50, 36, 
	3, 21, 0, 21, 0, 22, 
	1, 72, 8, 
/* LOOK  ALGA 	*/
	15, 27, 50, 
	3, 21, 14, 23, 0, 23, 
	21, 10, 74, 22, 
/* LOOK  ALGA 	*/
	6, 27, 50, 
	3, 21, 
	1, 7, 19, 
/* READ  BOOK 	*/
	6, 86, 38, 
	1, 24, 
	1, 7, 20, 
/* WEAR  MASK 	*/
	7, 36, 32, 
	1, 2, 
	3, 26, 10, 23, 
/* WEAR  MASK 	*/
	15, 36, 32, 
	3, 17, 0, 17, 0, 18, 
	1, 74, 74, 73, 
/* AUTO  0    	*/
	204, 
	8, 8, 0, 2, 9, 23, 
	60, 
/* GLUE  LENS 	*/
	13, 32, 8, 
	3, 22, 3, 20, 0, 9, 
	25, 58, 
/* TO    MASK 	*/
	21, 53, 32, 
	3, 22, 3, 20, 8, 9, 3, 17, 6, 18, 
	1, 73, 
/* AUTO  0    	*/
	206, 
	0, 20, 0, 8, 0, 9, 
	55, 58, 60, 
/* TO    ANY  	*/
	10, 53, 0, 
	8, 9, 0, 9, 
	3, 26, 60, 
/* LOOK  GAS  	*/
	15, 27, 101, 
	9, 7, 0, 3, 0, 3, 
	81, 78, 81, 138, 
/* SWIM  DOWN 	*/
	10, 48, 6, 
	8, 5, 0, 4, 
	1, 73, 58, 
/* AUTO  0    	*/
	210, 
	1, 46, 0, 46, 0, 11, 0, 27, 
	53, 119, 10, 
/* AUTO  0    	*/
	211, 
	2, 29, 0, 12, 0, 12, 0, 29, 
	54, 58, 55, 76, 
/* AUTO  0    	*/
	211, 
	2, 26, 0, 12, 0, 10, 0, 26, 
	54, 58, 55, 76, 
/* AUTO  0    	*/
	210, 
	2, 28, 0, 12, 0, 13, 0, 28, 
	54, 58, 55, 
/* AUTO  0    	*/
	211, 
	2, 36, 0, 12, 0, 14, 0, 36, 
	54, 58, 55, 76, 
/* AUTO  0    	*/
	211, 
	2, 40, 0, 12, 0, 20, 0, 40, 
	54, 58, 55, 76, 
/* AUTO  0    	*/
	211, 
	2, 27, 0, 12, 0, 11, 0, 27, 
	54, 58, 55, 76, 
/* LOOK  FAN  	*/
	10, 27, 81, 
	2, 59, 9, 27, 
	1, 7, 121, 
/* REMO  BLAD 	*/
	22, 34, 84, 
	14, 46, 8, 27, 2, 59, 3, 49, 0, 46, 
	1, 22, 74, 
/* GO    DOCK 	*/
	19, 1, 45, 
	2, 26, 0, 3, 0, 5, 0, 26, 
	1, 54, 60, 59, 
/* GO    SHIP 	*/
	23, 1, 11, 
	2, 29, 0, 29, 0, 13, 0, 5, 0, 7, 
	59, 54, 60, 60, 
/* GO    SHIP 	*/
	23, 1, 11, 
	2, 28, 0, 28, 0, 4, 0, 5, 0, 7, 
	59, 54, 60, 60, 
/* SWIM  UP   	*/
	23, 48, 5, 
	8, 4, 8, 20, 0, 4, 0, 11, 0, 40, 
	60, 54, 53, 76, 
/* SWIM  UP   	*/
	23, 48, 5, 
	8, 4, 8, 11, 0, 4, 0, 11, 0, 27, 
	60, 54, 53, 76, 
/* SWIM  UP   	*/
	23, 48, 5, 
	8, 4, 8, 10, 0, 4, 0, 11, 0, 26, 
	60, 54, 53, 76, 
/* SWIM  UP   	*/
	23, 48, 5, 
	8, 4, 8, 13, 0, 4, 0, 11, 0, 28, 
	60, 54, 53, 76, 
/* SWIM  UP   	*/
	11, 48, 5, 
	8, 4, 8, 12, 
	3, 26, 10, 23, 
/* SWIM  UP   	*/
	23, 48, 5, 
	8, 4, 8, 14, 0, 4, 0, 11, 0, 36, 
	60, 54, 53, 76, 
/* SWIM  OPEN 	*/
	23, 48, 44, 
	8, 4, 8, 12, 0, 4, 0, 11, 0, 29, 
	60, 54, 53, 76, 
/* GO    SEA  	*/
	19, 1, 39, 
	4, 3, 0, 5, 0, 11, 0, 26, 
	58, 54, 53, 76, 
/* GO    SEA  	*/
	23, 1, 39, 
	4, 13, 0, 5, 0, 11, 0, 29, 0, 7, 
	58, 54, 53, 58, 
/* SWIM  WEST 	*/
	19, 48, 4, 
	8, 4, 8, 13, 0, 13, 0, 12, 
	1, 60, 58, 76, 
/* SWIM  EAST 	*/
	19, 48, 3, 
	8, 4, 8, 10, 0, 10, 0, 11, 
	1, 60, 58, 76, 
/* SWIM  WEST 	*/
	19, 48, 4, 
	8, 4, 8, 11, 0, 11, 0, 10, 
	1, 60, 58, 76, 
/* SWIM  EAST 	*/
	19, 48, 3, 
	8, 4, 8, 12, 0, 12, 0, 13, 
	1, 60, 58, 76, 
/* SWIM  EAST 	*/
	11, 48, 3, 
	8, 4, 8, 11, 
	3, 26, 10, 23, 
/* LOOK  PORT 	*/
	18, 27, 43, 
	4, 2, 15, 6, 8, 29, 16, 0, 
	7, 134, 125, 
/* LOOK  PORT 	*/
	14, 27, 43, 
	4, 2, 16, 6, 8, 29, 
	7, 134, 124, 
/* SWIM  ANY  	*/
	10, 48, 0, 
	8, 4, 0, 20, 
	1, 58, 76, 
/* LOOK  ROCK 	*/
	23, 27, 60, 
	3, 34, 14, 21, 14, 22, 0, 21, 9, 8, 
	7, 34, 22, 74, 
/* GO    SEA  	*/
	23, 1, 39, 
	4, 4, 0, 5, 0, 11, 0, 28, 0, 7, 
	58, 54, 53, 58, 
/* GO    SEA  	*/
	19, 1, 39, 
	4, 15, 0, 5, 0, 11, 0, 36, 
	58, 54, 53, 76, 
/* MOVE  BUNK 	*/
	15, 64, 28, 
	14, 70, 0, 70, 2, 16, 
	21, 10, 22, 74, 
/* GO    LADD 	*/
	10, 1, 63, 
	4, 2, 0, 16, 
	1, 54, 76, 
/* GO    TOP  	*/
	10, 1, 66, 
	4, 2, 0, 16, 
	1, 54, 76, 
/* LOOK  WATC 	*/
	15, 27, 65, 
	3, 37, 0, 1, 0, 1, 
	35, 81, 78, 81, 
/* LOOK  UP   	*/
	14, 27, 5, 
	8, 4, 8, 12, 9, 0, 
	1, 7, 28, 
/* GO    BEAC 	*/
	19, 1, 49, 
	2, 36, 0, 36, 0, 5, 0, 15, 
	59, 60, 54, 76, 
/* GO    CURR 	*/
	4, 1, 52, 
	2, 39, 
	46, 
/* READ  SIGN 	*/
	6, 86, 31, 
	3, 42, 
	1, 7, 36, 
/* GET   ROCK 	*/
	13, 10, 60, 
	4, 15, 14, 34, 0, 34, 
	74, 1, 
/* GET   ROCK 	*/
	9, 10, 60, 
	3, 34, 0, 34, 
	74, 1, 
/* MOVE  MATT 	*/
	15, 64, 83, 
	14, 24, 4, 1, 0, 24, 
	21, 10, 22, 74, 
/* LOOK  SHIP 	*/
	15, 27, 11, 
	8, 4, 8, 12, 8, 0, 
	7, 28, 7, 139, 
/* SAY   ANY  	*/
	3, 49, 0, 
	1, 85, 30, 29, 
/* LOOK  ENGI 	*/
	15, 27, 64, 
	4, 17, 14, 49, 0, 49, 
	21, 10, 22, 74, 
/* GO    DOCK 	*/
	15, 1, 45, 
	2, 32, 0, 3, 0, 7, 
	1, 54, 58, 76, 
/* SWIM  ANY  	*/
	4, 48, 0, 
	8, 5, 
	1, 
/* LIST  ANY  	*/
	9, 16, 0, 
	9, 7, 9, 19, 
	32, 114, 
/* GO    CURR 	*/
	4, 1, 52, 
	2, 38, 
	46, 
/* DIG   ANY  	*/
	5, 43, 0, 
	3, 46, 
	21, 30, 
/* SAIL  SHIP 	*/
	6, 73, 11, 
	6, 15, 
	3, 26, 51, 
/* QUIT  ANY  	*/
	0, 9, 0, 
	63, 
/* SWIM  ANY  	*/
	1, 48, 0, 
	30, 29, 
/* LOOK  EAST 	*/
	10, 27, 3, 
	8, 4, 8, 11, 
	1, 7, 37, 
/* GO    SHIP 	*/
	10, 1, 11, 
	2, 63, 0, 23, 
	1, 54, 76, 
/* SAVE  GAME 	*/
	1, 55, 53, 
	1, 71, 
/* LOOK  SHIP 	*/
	13, 27, 11, 
	8, 4, 8, 12, 9, 0, 
	1, 116, 
/* FEEL  SILT 	*/
	19, 24, 62, 
	2, 35, 8, 12, 14, 44, 0, 44, 
	21, 10, 22, 74, 
/* SAIL  SHIP 	*/
	7, 73, 11, 
	5, 52, 
	3, 26, 102, 133, 
/* SLEE  ANY  	*/
	1, 69, 0, 
	3, 26, 
/* FEEL  ANY  	*/
	5, 24, 0, 
	4, 1, 
	1, 43, 
/* FIND  ANY  	*/
	1, 33, 0, 
	3, 41, 
/* LOOK  SNAI 	*/
	2, 27, 95, 
	1, 7, 130, 
/* LIST  ANY  	*/
	2, 16, 0, 
	32, 30, 31, 
/* GO    TOP  	*/
	0, 1, 66, 
	44, 
/* RUB   ANY  	*/
	1, 46, 0, 
	30, 29, 
/* OPEN  OYST 	*/
	9, 57, 93, 
	3, 44, 0, 30, 
	44, 58, 
/* GET   MATT 	*/
	2, 10, 83, 
	3, 26, 107, 
/* LOOK  IT   	*/
	2, 27, 71, 
	3, 26, 108, 
/* GO    CRAW 	*/
	14, 1, 16, 
	2, 53, 11, 0, 0, 20, 
	1, 54, 76, 
/* GO    CRAW 	*/
	11, 1, 16, 
	2, 53, 10, 0, 
	3, 26, 10, 111, 
/* SCOR  ANY  	*/
	5, 71, 0, 
	9, 25, 
	1, 112, 
/* WAKE  UP   	*/
	0, 44, 5, 
	46, 
/* GET   UP   	*/
	10, 10, 5, 
	4, 1, 0, 2, 
	1, 54, 76, 
/* READ  BOOK 	*/
	14, 86, 38, 
	3, 56, 9, 3, 9, 2, 
	1, 7, 115, 
/* GO    SEA  	*/
	23, 1, 39, 
	4, 19, 0, 5, 0, 11, 0, 28, 0, 7, 
	58, 54, 53, 58, 
/* SQUI  ANY  	*/
	23, 80, 0, 
	8, 2, 9, 3, 9, 4, 6, 18, 0, 2, 
	60, 57, 76, 73, 
/* AUTO  0    	*/
	203, 
	0, 18, 0, 2, 
	60, 88, 58, 70, 
/* OPEN  CHES 	*/
	15, 57, 100, 
	14, 56, 3, 64, 0, 56, 
	7, 10, 74, 73, 
/* AUTO  0    	*/
	194, 
	22, 7, 132, 
/* DROP  GLUE 	*/
	1, 18, 36, 
	3, 26, 
/* FOLD  GLAS 	*/
	6, 8, 7, 
	3, 1, 
	117, 3, 26, 
/* SQUI  ANY  	*/
	5, 80, 0, 
	8, 4, 
	30, 29, 
/* GO    HILL 	*/
	5, 1, 10, 
	4, 7, 
	3, 46, 
/* GO    LEDG 	*/
	0, 1, 9, 
	44, 
/* DRIN  RUM  	*/
	9, 7, 56, 
	3, 41, 0, 41, 
	1, 59, 
/* ROLL  PAIN 	*/
	11, 81, 24, 
	3, 51, 0, 26, 
	1, 117, 25, 58, 
/* TO    OILS 	*/
	22, 53, 79, 
	3, 51, 3, 57, 8, 26, 0, 58, 0, 51, 
	1, 72, 73, 
/* AUTO  0    	*/
	201, 
	0, 57, 0, 26, 
	59, 60, 
/* UNRO  PAIN 	*/
	18, 83, 24, 
	3, 58, 0, 51, 0, 58, 0, 57, 
	1, 72, 74, 
/* ROLL  ANY  	*/
	1, 81, 0, 
	117, 118, 
/* GO    FAN  	*/
	11, 1, 81, 
	2, 59, 9, 27, 
	3, 26, 117, 121, 
/* LOOK  FAN  	*/
	10, 27, 81, 
	2, 59, 8, 27, 
	7, 122, 73, 
/* AUTO  0    	*/
	203, 
	14, 60, 0, 60, 
	21, 10, 22, 74, 
/* SAIL  SHIP 	*/
	23, 73, 11, 
	4, 2, 13, 32, 0, 32, 0, 4, 0, 3, 
	56, 72, 58, 73, 
/* AUTO  0    	*/
	203, 
	0, 3, 0, 15, 
	81, 83, 1, 135, 
/* AUTO  0    	*/
	199, 
	15, 0, 
	3, 136, 137, 61, 
/* AUTO  0    	*/
	199, 
	0, 3, 
	81, 88, 88, 88, 
/* REMO  BLAD 	*/
	22, 34, 84, 
	14, 46, 8, 27, 2, 59, 3, 49, 0, 46, 
	1, 22, 74, 
/* LOOK  UP   	*/
	15, 27, 5, 
	8, 4, 8, 12, 8, 0, 
	7, 28, 7, 139, 
/* GO    HELM 	*/
	5, 1, 69, 
	4, 2, 
	3, 133, 
/* STOP  ENGI 	*/
	13, 75, 64, 
	4, 18, 8, 28, 0, 28, 
	1, 60, 
/* LOOK  SHIP 	*/
	6, 27, 11, 
	8, 7, 
	7, 120, 73, 
/* AUTO  0    	*/
	204, 
	15, 6, 16, 0, 8, 29, 
	125, 
/* AUTO  0    	*/
	200, 
	16, 6, 8, 29, 
	124, 
/* AUTO  0    	*/
	196, 
	9, 29, 
	126, 
/* LOOK  CEIL 	*/
	15, 27, 86, 
	4, 2, 14, 61, 0, 61, 
	53, 7, 10, 76, 
/* MOVE  BUTT 	*/
	14, 64, 85, 
	2, 61, 8, 29, 0, 29, 
	1, 60, 127, 
/* MOVE  BUTT 	*/
	14, 64, 85, 
	2, 61, 9, 29, 0, 29, 
	1, 58, 127, 
/* WAIT  ANY  	*/
	19, 89, 0, 
	0, 4, 0, 1, 0, 4, 0, 1, 
	83, 81, 82, 81, 
/* FEEL  SHIP 	*/
	15, 24, 11, 
	8, 4, 8, 12, 9, 0, 
	7, 40, 67, 139, 
/* MOVE  ANY  	*/
	1, 64, 0, 
	30, 29, 
/* TO    ANY  	*/
	11, 53, 0, 
	0, 9, 0, 26, 
	60, 60, 3, 26, 
/* SAIL  SHIP 	*/
	23, 73, 11, 
	4, 2, 14, 32, 0, 32, 0, 4, 0, 3, 
	73, 72, 60, 57, 
/* AUTO  0    	*/
	207, 
	0, 3, 0, 15, 0, 31, 
	81, 83, 1, 60, 
/* AUTO  0    	*/
	199, 
	15, 0, 
	3, 136, 137, 61, 
/* AUTO  0    	*/
	196, 
	0, 3, 
	81, 
/* USE   SNAI 	*/
	23, 59, 95, 
	8, 30, 3, 44, 3, 67, 14, 66, 0, 66, 
	1, 74, 131, 22, 
/* LOOK  DOCK 	*/
	15, 27, 45, 
	4, 22, 14, 69, 0, 69, 
	7, 10, 22, 74, 
/* LOOK  UP   	*/
	15, 27, 5, 
	4, 22, 14, 69, 0, 69, 
	7, 10, 22, 74, 
/* FEEL  SILT 	*/
	19, 24, 62, 
	2, 35, 0, 22, 0, 2, 0, 18, 
	39, 58, 58, 60, 
/* GO    DOCK 	*/
	10, 1, 45, 
	2, 27, 0, 22, 
	1, 54, 76, 
/* STOP  ANY  	*/
	0, 75, 0, 
	44, 
/* FEEL  ANY  	*/
	1, 24, 0, 
	30, 29, 
/* OPEN  ANY  	*/
	0, 57, 0, 
	44, 
/* SQUI  ANY  	*/
	0, 80, 0, 
	1, 
/* LOOK  ANY  	*/
	3, 27, 0, 
	7, 30, 31, 76, 
/* USE   ANY  	*/
	1, 59, 0, 
	3, 26, 
/* GO    PORT 	*/
	15, 1, 43, 
	1, 2, 0, 1, 0, 2, 
	24, 53, 73, 59, 
/* AUTO  0    	*/
	197, 
	0, 2, 
	58, 56, 
/* AUTO  0    	*/
	199, 
	10, 0, 
	3, 26, 10, 111, 
/* AUTO  0    	*/
	215, 
	11, 0, 4, 19, 0, 2, 0, 48, 0, 45, 
	1, 54, 72, 76, 
/* AUTO  0    	*/
	206, 
	11, 0, 2, 48, 0, 19, 
	1, 54, 76, 
	255,
};


const uint8_t verbs[] = {
	/* AUTO */
	65, 85, 84, 79,
	/* GO */
	71, 79, 32, 32,
	/* *WALK */
	215, 65, 76, 75,
	/* *FOLL */
	198, 79, 76, 76,
	/* *ENTE */
	197, 78, 84, 69,
	/* *CLIM */
	195, 76, 73, 77,
	/* *CRAW */
	195, 82, 65, 87,
	/* DRIN */
	68, 82, 73, 78,
	/* FOLD */
	70, 79, 76, 68,
	/* QUIT */
	81, 85, 73, 84,
	/* GET */
	71, 69, 84, 32,
	/* *TAKE */
	212, 65, 75, 69,
	/* *GRAB */
	199, 82, 65, 66,
	/* *PICK */
	208, 73, 67, 75,
	/* *HOLD */
	200, 79, 76, 68,
	/* *STAN */
	211, 84, 65, 78,
	/* LIST */
	76, 73, 83, 84,
	/* *HEAR */
	200, 69, 65, 82,
	/* DROP */
	68, 82, 79, 80,
	/* *LEAV */
	204, 69, 65, 86,
	/* *PUT */
	208, 85, 84, 32,
	/* *RELE */
	210, 69, 76, 69,
	/* *GIVE */
	199, 73, 86, 69,
	/* *THRO */
	212, 72, 82, 79,
	/* FEEL */
	70, 69, 69, 76,
	/* *TOUC */
	212, 79, 85, 67,
	/* *PROB */
	208, 82, 79, 66,
	/* LOOK */
	76, 79, 79, 75,
	/* *EXAM */
	197, 88, 65, 77,
	/* *L */
	204, 32, 32, 32,
	/* *DESC */
	196, 69, 83, 67,
	/* . */
	46, 32, 32, 32,
	/* GLUE */
	71, 76, 85, 69,
	/* FIND */
	70, 73, 78, 68,
	/* REMO */
	82, 69, 77, 79,
	/* *UNSC */
	213, 78, 83, 67,
	/* WEAR */
	87, 69, 65, 82,
	/* *DON */
	196, 79, 78, 32,
	/* *PUTO */
	208, 85, 84, 79,
	/* JUMP */
	74, 85, 77, 80,
	/* *LEAP */
	204, 69, 65, 80,
	/* INVE */
	73, 78, 86, 69,
	/* *I */
	201, 32, 32, 32,
	/* DIG */
	68, 73, 71, 32,
	/* WAKE */
	87, 65, 75, 69,
	/* BREA */
	66, 82, 69, 65,
	/* RUB */
	82, 85, 66, 32,
	/* HYPE */
	72, 89, 80, 69,
	/* SWIM */
	83, 87, 73, 77,
	/* SAY */
	83, 65, 89, 32,
	/* MAKE */
	77, 65, 75, 69,
	/* *MIX */
	205, 73, 88, 32,
	/* DIVE */
	68, 73, 86, 69,
	/* TO */
	84, 79, 32, 32,
	/* *IN */
	201, 78, 32, 32,
	/* SAVE */
	83, 65, 86, 69,
	/* WAKE */
	87, 65, 75, 69,
	/* OPEN */
	79, 80, 69, 78,
	/* *UNLO */
	213, 78, 76, 79,
	/* USE */
	85, 83, 69, 32,
	/* *WITH */
	215, 73, 84, 72,
	/* CLEA */
	67, 76, 69, 65,
	/* *WASH */
	215, 65, 83, 72,
	/* *RINS */
	210, 73, 78, 83,
	/* MOVE */
	77, 79, 86, 69,
	/* *PUSH */
	208, 85, 83, 72,
	/* *PULL */
	208, 85, 76, 76,
	/* *LIFT */
	204, 73, 70, 84,
	/* *PRES */
	208, 82, 69, 83,
	/* SLEE */
	83, 76, 69, 69,
	/* *EAT */
	197, 65, 84, 32,
	/* SCOR */
	83, 67, 79, 82,
	/* HELP */
	72, 69, 76, 80,
	/* SAIL */
	83, 65, 73, 76,
	/* *DRIV */
	196, 82, 73, 86,
	/* STOP */
	83, 84, 79, 80,
	/* *SHUT */
	211, 72, 85, 84,
	/* EMPT */
	69, 77, 80, 84,
	/* SPIT */
	83, 80, 73, 84,
	/* YAWN */
	89, 65, 87, 78,
	/* SQUI */
	83, 81, 85, 73,
	/* ROLL */
	82, 79, 76, 76,
	/* *WRAP */
	215, 82, 65, 80,
	/* UNRO */
	85, 78, 82, 79,
	/* *UNWR */
	213, 78, 87, 82,
	/*  */
	32, 32, 32, 32,
	/* READ */
	82, 69, 65, 68,
	/* STAR */
	83, 84, 65, 82,
	/* *CRAN */
	195, 82, 65, 78,
	/* WAIT */
	87, 65, 73, 84,
	/* *PAUS */
	208, 65, 85, 83,
	/*  */
	32, 32, 32, 32,
	/* CHAR */
	67, 72, 65, 82,
	/* *RECH */
	210, 69, 67, 72,
	/* *KILL */
	203, 73, 76, 76,
	/* *LIGH */
	204, 73, 71, 72,
	/* *BURN */
	194, 85, 82, 78,
	/* *TEAR */
	212, 69, 65, 82,
	/* *RIP */
	210, 73, 80, 32,
	/* *STAB */
	211, 84, 65, 66,
	/* *SHOR */
	211, 72, 79, 82,
	/* *FIX */
	198, 73, 88, 32,
	/* *REPA */
	210, 69, 80, 65,
	/* . */
	46, 32, 32, 32,
	/*  */
	32, 32, 32, 32,
	0,
};
const uint8_t nouns[] = {
	/* ANY */
	65, 78, 89, 32,
	/* NORT */
	78, 79, 82, 84,
	/* SOUT */
	83, 79, 85, 84,
	/* EAST */
	69, 65, 83, 84,
	/* WEST */
	87, 69, 83, 84,
	/* UP */
	85, 80, 32, 32,
	/* DOWN */
	68, 79, 87, 78,
	/* GLAS */
	71, 76, 65, 83,
	/* LENS */
	76, 69, 78, 83,
	/* LEDG */
	76, 69, 68, 71,
	/* HILL */
	72, 73, 76, 76,
	/* SHIP */
	83, 72, 73, 80,
	/* *BOAT */
	194, 79, 65, 84,
	/* CRAC */
	67, 82, 65, 67,
	/* *CREV */
	195, 82, 69, 86,
	/* PIRA */
	80, 73, 82, 65,
	/* CRAW */
	67, 82, 65, 87,
	/* FRAM */
	70, 82, 65, 77,
	/* AROU */
	65, 82, 79, 85,
	/* DOUB */
	68, 79, 85, 66,
	/* STAM */
	83, 84, 65, 77,
	/* BOX */
	66, 79, 88, 32,
	/* SHED */
	83, 72, 69, 68,
	/* *TOOL */
	212, 79, 79, 76,
	/* PAIN */
	80, 65, 73, 78,
	/* *PICT */
	208, 73, 67, 84,
	/* *REMB */
	210, 69, 77, 66,
	/* *BLAC */
	194, 76, 65, 67,
	/* BUNK */
	66, 85, 78, 75,
	/* *BED */
	194, 69, 68, 32,
	/* BREA */
	66, 82, 69, 65,
	/* SIGN */
	83, 73, 71, 78,
	/* MASK */
	77, 65, 83, 75,
	/* *FACE */
	198, 65, 67, 69,
	/* HAMM */
	72, 65, 77, 77,
	/* DECK */
	68, 69, 67, 75,
	/* GLUE */
	71, 76, 85, 69,
	/* AMBE */
	65, 77, 66, 69,
	/* BOOK */
	66, 79, 79, 75,
	/* SEA */
	83, 69, 65, 32,
	/* *OCEA */
	207, 67, 69, 65,
	/* *WATE */
	215, 65, 84, 69,
	/* *POOL */
	208, 79, 79, 76,
	/* PORT */
	80, 79, 82, 84,
	/* OPEN */
	79, 80, 69, 78,
	/* DOCK */
	68, 79, 67, 75,
	/* *BEAM */
	194, 69, 65, 77,
	/* DEEP */
	68, 69, 69, 80,
	/* CABI */
	67, 65, 66, 73,
	/* BEAC */
	66, 69, 65, 67,
	/* ALGA */
	65, 76, 71, 65,
	/* INVE */
	73, 78, 86, 69,
	/* CURR */
	67, 85, 82, 82,
	/* GAME */
	71, 65, 77, 69,
	/* DOOR */
	68, 79, 79, 82,
	/* SHOV */
	83, 72, 79, 86,
	/* RUM */
	82, 85, 77, 32,
	/* CLOC */
	67, 76, 79, 67,
	/* *ALAR */
	193, 76, 65, 82,
	/* TORC */
	84, 79, 82, 67,
	/* ROCK */
	82, 79, 67, 75,
	/* EYES */
	69, 89, 69, 83,
	/* SILT */
	83, 73, 76, 84,
	/* LADD */
	76, 65, 68, 68,
	/* ENGI */
	69, 78, 71, 73,
	/* WATC */
	87, 65, 84, 67,
	/* TOP */
	84, 79, 80, 32,
	/* *TOPB */
	212, 79, 80, 66,
	/* *SUMM */
	211, 85, 77, 77,
	/* HELM */
	72, 69, 76, 77,
	/* PILI */
	80, 73, 76, 73,
	/* IT */
	73, 84, 32, 32,
	/* *OBJE */
	207, 66, 74, 69,
	/* *HAND */
	200, 65, 78, 68,
	/* YOHO */
	89, 79, 72, 79,
	/* SCRE */
	83, 67, 82, 69,
	/* MAP */
	77, 65, 80, 32,
	/* BACK */
	66, 65, 67, 75,
	/* EARR */
	69, 65, 82, 82,
	/* OILS */
	79, 73, 76, 83,
	/* *RAIN */
	210, 65, 73, 78,
	/* FAN */
	70, 65, 78, 32,
	/* BROO */
	66, 82, 79, 79,
	/* MATT */
	77, 65, 84, 84,
	/* BLAD */
	66, 76, 65, 68,
	/* BUTT */
	66, 85, 84, 84,
	/* CEIL */
	67, 69, 73, 76,
	/* *CIEL */
	195, 73, 69, 76,
	/* LIGH */
	76, 73, 71, 72,
	/* *FLOO */
	198, 76, 79, 79,
	/* BATT */
	66, 65, 84, 84,
	/* DOLL */
	68, 79, 76, 76,
	/* ISLE */
	73, 83, 76, 69,
	/* OYST */
	79, 89, 83, 84,
	/* PEAR */
	80, 69, 65, 82,
	/* SNAI */
	83, 78, 65, 73,
	/* FLOT */
	70, 76, 79, 84,
	/* *JETS */
	202, 69, 84, 83,
	/* PIN */
	80, 73, 78, 32,
	/* RING */
	82, 73, 78, 71,
	/* CHES */
	67, 72, 69, 83,
	/* GAS */
	71, 65, 83, 32,
	/* *FUEL */
	198, 85, 69, 76,
	/* WIRE */
	87, 73, 82, 69,
	/* *RIM */
	210, 73, 77, 32,
	0,
};
const uint8_t automap[] = {
	/* GLAS */
	71, 76, 65, 83,
	1,
	/* SIGN */
	83, 73, 71, 78,
	3,
	/* HAMM */
	72, 65, 77, 77,
	6,
	/* BOX */
	66, 79, 88, 32,
	8,
	/* STAM */
	83, 84, 65, 77,
	10,
	/* DOUB */
	68, 79, 85, 66,
	11,
	/* PAIN */
	80, 65, 73, 78,
	12,
	/* FRAM */
	70, 82, 65, 77,
	13,
	/* PAIN */
	80, 65, 73, 78,
	14,
	/* MAP */
	77, 65, 80, 32,
	15,
	/* MASK */
	77, 65, 83, 75,
	17,
	/* WIRE */
	87, 73, 82, 69,
	19,
	/* LENS */
	76, 69, 78, 83,
	20,
	/* ALGA */
	65, 76, 71, 65,
	21,
	/* GLUE */
	71, 76, 85, 69,
	22,
	/* AMBE */
	65, 77, 66, 69,
	23,
	/* BOOK */
	66, 79, 79, 75,
	24,
	/* CLOC */
	67, 76, 79, 67,
	31,
	/* ROCK */
	82, 79, 67, 75,
	34,
	/* WATC */
	87, 65, 84, 67,
	37,
	/* RUM */
	82, 85, 77, 32,
	41,
	/* SIGN */
	83, 73, 71, 78,
	42,
	/* OYST */
	79, 89, 83, 84,
	44,
	/* BLAD */
	66, 76, 65, 68,
	46,
	/* SCRE */
	83, 67, 82, 69,
	49,
	/* PAIN */
	80, 65, 73, 78,
	50,
	/* PAIN */
	80, 65, 73, 78,
	51,
	/* SIGN */
	83, 73, 71, 78,
	54,
	/* EARR */
	69, 65, 82, 82,
	55,
	/* BOOK */
	66, 79, 79, 75,
	56,
	/* OILS */
	79, 73, 76, 83,
	57,
	/* PAIN */
	80, 65, 73, 78,
	58,
	/* BROO */
	66, 82, 79, 79,
	60,
	/* BOOK */
	66, 79, 79, 75,
	62,
	/* CHES */
	67, 72, 69, 83,
	64,
	/* DOLL */
	68, 79, 76, 76,
	65,
	/* PEAR */
	80, 69, 65, 82,
	66,
	/* SNAI */
	83, 78, 65, 73,
	67,
	/* SNAI */
	83, 78, 65, 73,
	68,
	/* PIN */
	80, 73, 78, 32,
	69,
	/* RING */
	82, 73, 78, 71,
	70,
	/* OYST */
	79, 89, 83, 84,
	71,
	0,
};
#include <string.h>
#include <stdlib.h>
#include <ctype.h>
#include <unistd.h>
#include <fcntl.h>
#include <setjmp.h>

#ifdef __linux__
#include <stdio.h>
#endif

static jmp_buf restart;

static char linebuf[81];
static char *nounbuf;
static char wordbuf[WORDSIZE + 1];

static uint8_t verb;
static uint8_t noun;
static const uint8_t *linestart;
static uint8_t linematch;
static uint8_t actmatch;
static uint8_t continuation;
static uint16_t *param;
static uint16_t param_buf[5];
static uint8_t carried;
static uint8_t lighttime;
static uint8_t location;
static uint8_t objloc[NUM_OBJ];
static uint8_t roomsave[6];
static uint8_t savedroom;
static uint32_t bitflags;
static int16_t counter;
static int16_t counter_array[16];
static uint8_t redraw;
static uint8_t rows, cols;

static void error(const char *p);

#define VERB_GO		1
#define VERB_GET	10
#define VERB_DROP	18

#define LIGHTOUT	16
#define DARKFLAG	15
#define LIGHT_SOURCE	9

#define REDRAW		1
#define REDRAW_MAYBE	2

#ifdef CONFIG_IO_CURSES

#include <curses.h>

#define REDRAW_MASK	(REDRAW|REDRAW_MAYBE)

static char wbuf[81];
static int wbp = 0;
static int xpos = 0, ypos = 0;
static int bottom;
WINDOW *topwin, *botwin, *curwin;

static void flush_word(void)
{
  wbuf[wbp] = 0;
  waddstr(curwin, wbuf);
  xpos += wbp;
  wbp = 0;
}

static void new_line(void)
{
  xpos = 0;
  if (curwin == topwin)
    ypos++;
  else {
    scroll(curwin);
    ypos = bottom;
  }
  wmove(curwin, ypos, xpos);
}

static void char_out(char c)
{
  if (c == '\n') {
    flush_word();
    new_line();
    return;
  }
  if (c != ' ') {
    if (wbp < 80)
      wbuf[wbp++] = c;
    return;
  }
  if (xpos + wbp >= cols)
    new_line();
  flush_word();
  waddch(curwin, ' ');
  xpos++;
}

static void strout_lower(const uint8_t *p)
{
  while(*p)
    char_out(*p++);
}

static void strout_lower_spc(const uint8_t *p)
{
  strout_lower(p);
  char_out(' ');
}

static void decout_lower(uint16_t v)
{
#ifdef __linux__
  char buf[9];
  snprintf(buf, 8, "%d", v);	/* FIXME: avoid expensive snprintf */
  strout_lower((uint8_t *)buf);
#else
  strout_lower((uint8_t *)_itoa(v));
#endif
}

static void strout_upper(const uint8_t *p)
{
  strout_lower(p);
}

static char readchar(void)
{
  wrefresh(botwin);
  return wgetch(botwin);
}

static void line_input(void)
{
  int c;
  char *p = linebuf;

  do {
    wmove(botwin, ypos, xpos);
    wrefresh(botwin);
    c = wgetch(botwin);
    if (c == 8 || c == 127) {
      if (p > linebuf) {
        xpos--;
        mvwaddch(botwin, ypos, xpos, ' ');
        p--;
      }
      continue;
    }
    if (c > 31 && c < 127) {
      if (p < linebuf + 80 && xpos < cols - 1) {
        *p++ = c;
        mvwaddch(botwin, ypos, xpos, c);
        xpos++;
      }
      continue;
    }
  }
  while (c != 13 && c != 10);
  *p = 0;
  new_line();
}

static int saved_x;

static void begin_upper(void)
{
  saved_x = xpos;
  curwin = topwin;
  werase(topwin);
  ypos = 0;
  xpos = 0;
}

static void end_upper(void)
{
  flush_word();
  curwin = botwin;
  xpos = saved_x;
  ypos = bottom;
  wrefresh(topwin);
}

static void display_init(void)
{
  int trow;

  initscr();
  noecho();
  cbreak();
  nonl();

  getmaxyx(stdscr, rows, cols);

  if (rows < 16)
    error("display too small");

  trow = 10;
  if (rows / 2 < 10)
    trow = rows / 2;
  bottom = rows - trow;

  topwin = newwin(trow, cols, 0, 0);
  botwin = newwin(bottom--, cols, trow, 0);
  if (!topwin || !botwin)
    error("curses");
  scrollok(botwin, TRUE);
  curwin = botwin;
  new_line();
}

static void display_exit(void)
{
  endwin();
}

#else

#define REDRAW_MASK	REDRAW

static char wbuf[80];
static int wbp = 0;
static int xpos = 0;

static void display_init(void)
{
  char *c;
#ifdef TIOCGWINSZ
  struct winsize w;
  if (ioctl(0, TIOCGWINSZ, &w) != -1) {
    rows = w.ws_row;
    cols = ws.ws_col;
    return;
  }
#elif VTSIZE
  int16_t v = ioctl(0, VTSIZE, 0);
  if (v != -1) {
    rows =  v >> 8;
    cols = v;
    return;
  }
#endif
  c = getenv("COLS");
  rows = 25;
  cols = c ? atoi(c): 80;
  if (cols == 0)
    cols = 80;
}

static void display_exit(void)
{
}

static void flush_word(void)
{
  write(1, wbuf, wbp);
  xpos += wbp;
  wbp = 0;
}

static void char_out(char c)
{
  if (c == '\n') {
    flush_word();
    write(1, "\n", 1);
    xpos = 0;
    return;
  }
  if (c != ' ') {
    if (wbp < 80)
      wbuf[wbp++] = c;
    return;
  }
  if (xpos + wbp >= cols) {
    xpos = 0;
    write(1,"\n", 1);
  }
  flush_word();
  write(1," ", 1);
  xpos++;
}

static void strout_lower(const uint8_t *p)
{
  while(*p)
    char_out(*p++);
}

static void strout_lower_spc(const uint8_t *p)
{
  strout_lower(p);
  char_out(' ');
}

static void decout_lower(uint16_t v)
{
#ifdef __linux__
  char buf[9];
  snprintf(buf, 8, "%d", v);	/* FIXME: avoid expensive snprintf */
  strout_lower((uint8_t *)buf);
#else
  strout_lower((uint8_t *)_itoa(v));
#endif
}

static void strout_upper(const uint8_t *p)
{
  strout_lower(p);
}

static char readchar(void)
{
  char c;
  if (read(0, &c, 1) < 1)
    return -1;
  return c;
}

static void line_input(void)
{
  int l = read(0, linebuf, sizeof(linebuf));
  if (l < 0)
    error("read");
  linebuf[l] = 0;
  if (l && linebuf[l-1] == '\n')
    linebuf[l-1] = 0;
}

static void begin_upper(void)
{
  strout_upper("\n\n\n\n");
}

static void end_upper(void)
{
  uint8_t l = cols;
  char_out('\n');
  while(l--)
    char_out('-');
  char_out('\n');
}



#endif

/******************** Common code ******************/

static uint8_t yes_or_no(void)
{
  char c;
  do {
    c = readchar();
    if (c == 'Y'  || c == 'y' || c == 'J' || c == 'j')
      return 1;
  } while(c != -1 && c != 'N' && c != 'n');
  return 0;
}

static void exit_game(uint8_t code)
{
  display_exit();
  exit(code);
}

static void error(const char *p)
{
  display_exit();
  write(2, p, strlen(p));
  exit(1);
}

static uint8_t random_chance(uint8_t v)
{
  v = v + v + (v >> 1);	/* scale as 0-249 */
  if (((rand() >> 3) & 0xFF) <= v)
    return 1;
  return 0;
}

static char *skip_spaces(char *p)
{
  while(*p && isspace(*p))
    p++;
  return p;
}

static char *copyword(char *p)
{
  char *t = wordbuf;
  p = skip_spaces(p);
  memset(wordbuf, ' ', WORDSIZE+1);
  while (*p && !isspace(*p) && t < wordbuf + WORDSIZE)
    *t++ = *p++;
  while(*p && !isspace(*p))
    p++;
  return p;
}

static int wordeq(const uint8_t *a, const char *b, uint8_t l)
{
  while(l--)
    if ((*a++ & 0x7F) != toupper(*b++))
      return 0;
  return 1;
}

static uint8_t whichword(const uint8_t *p)
{
  uint8_t code = 0;
  uint8_t i = 0;

  if (*wordbuf == 0 || *wordbuf == ' ')
    return 0;		/* No word */
  i--;
  
  do {
    i++;
    if (!(*p & 0x80))
      code = i;
    if (wordeq(p, wordbuf, WORDSIZE))
      return code;
    p += WORDSIZE;
  } while(*p != 0);
  return 255;
}

static void scan_noun(char *x)
{
  x = skip_spaces(x);
  nounbuf = x;
  copyword(x);
  noun = whichword(nouns);
}

static void scan_input(void)
{
  char *x = copyword(linebuf);
  verb = whichword(verbs);
  scan_noun(x);
}

void abbrevs(void)
{
  char *x = skip_spaces(linebuf);
  const char *p = NULL;
  if (x[1] != 0 && x[1] != ' ')
    return;
  switch(toupper(*x)) {
    case 'N': 
      p = "NORTH";
      break;
    case 'E':
      p = "EAST";
      break;
    case 'S':
      p = "SOUTH";
      break;
    case 'W':
      p = "WEST";
      break;
    case 'U':
      p = "UP";
      break;
    case 'D':
      p = "DOWN";
      break;
    case 'I':
      p = "INVEN";
      break;
  }
  if (p)
    strcpy(linebuf, p);
}
  
static const uint8_t *run_conditions(const uint8_t *p, uint8_t n)
{
  uint8_t i;
  
  for (i = 0; i < n; i++) {
    uint8_t opc = *p++;
    uint16_t par = *p++ | ((opc & 0xE0) >> 5);
    uint8_t op = objloc[par];
    opc &= 0x1F;

    switch(opc) {
      case 0:
        *param++ = par;
        break;
      case 1:
        if (op != 255)
          return NULL;
        break;
      case 2:
        if (op != location)
          return NULL;
        break;
      case 3:
        if (op != 255 && op != location)
          return NULL;
        break;
      case 4:
        if (location != par)
          return NULL;
        break;
      case 5:
        if (op == location)
          return NULL;
        break;
      case 6:
        if (op == 255)
          return NULL;
        break;
      case 7:
        if (location == par)
          return NULL;
        break;
      case 8:
        if (!(bitflags & (1 << par)))
          return NULL;
        break;
      case 9:
        if (bitflags & (1 << par))
          return NULL;
        break;
      case 10:
        if (!carried)
          return NULL;
        break;
      case 11:
        if (carried)
          return NULL;
        break;
      case 12:
        if (op == 255 || op == location)
          return NULL;
        break;
      case 13:
        if (op == 0)
          return NULL;
        break;
      case 14:
        if (op != 0)
          return NULL;
        break;
      case 15:
        if (counter > par)
          return NULL;
        break;
      case 16:
        if (counter < par)
          return NULL;
        break;
      case 17:
        if (op != objinit[par]) 
          return NULL;
        break;
      case 18:
        if (op == objinit[par])
          return NULL;
        break;
      case 19:
        if (counter != par)
          return NULL;
        break;
      default:
        error("BADCOND");
    }
  }
  return p;
}

uint8_t islight(void)
{
  uint8_t l = objloc[LIGHT_SOURCE];
  if (!(bitflags & (1 << DARKFLAG)))
    return 1;
  if (l == 255 || l == location)
    return 1;
  return 0;
}

static void action_look(void)
{
  const uint8_t *e;
  const uint8_t *p;
  uint8_t c;
  uint8_t f = 1;
  const uint8_t **op = objtext;

  redraw = 0;

  begin_upper();

  if (!islight()) {
    strout_upper(itsdark);
    end_upper();
    return;
  }
  p = locdata[location].text;
  e = locdata[location].exit;
  if (*p == '*')
    p++;
  else
    strout_upper(youare);
  strout_upper(p);
  strout_upper(newline);
  strout_upper(obexit);

  for (c = 0; c < 6; c++) {
    if (*e++) {
      if (f)
        f = 0;
      else
        strout_upper(dashstr);
      strout_upper(exitmsgptr[c]);
    }
  }
  if (f)
    strout_upper(nonestr);
  strout_upper(dotnewline);
  f = 1;
  e = objloc;
  while(e < objloc + NUM_OBJ) {
    if (*e++ == location) {
      if (f) {
        strout_upper(canalsosee);
        f = 0;
      } else
        strout_upper(dashstr);
      strout_upper(*op);
    }
    op++;
  }
  end_upper();
}

static void action_delay(void)
{
  sleep(2);
}

static void action_dead(void)
{
  strout_lower(dead);
  bitflags &= ~(1 << DARKFLAG);
  location = lastloc;
  action_look();
}

static void action_quit(void)
{
  strout_lower(playagain);
  if (yes_or_no())
    longjmp(restart, 0);
  exit_game(0);
}

static void action_score(void)
{
  uint8_t *p = objloc;
  const uint8_t **m = objtext;
  uint8_t t = 0, s = 0;

  while(p < objloc + NUM_OBJ) {
    if (*m[0] == '*') {
      t++;
      if (*p == treasure)
        s++;
    }
    m++;
    p++;
  }

  strout_lower(stored_msg);
  decout_lower(s);
  strout_lower(stored_msg2);
  decout_lower((s * (uint16_t)100) / t);
  strout_lower(dotnewline);
  if (s == t)
    action_quit();
}

static void action_inventory(void)
{
  uint8_t *p = objloc;
  const uint8_t **m = objtext;
  uint8_t f = 1;

  strout_lower(carrying);
  if (carried == 0)
    strout_lower(nothing);
  else {  
    while(p < objloc + NUM_OBJ) {
      if (*p == 255) {
        if (!f)
          strout_lower(dashstr);
        else
          f = 0;
        strout_lower(*m);
      }
      m++;
      p++;
    }
  }
  strout_lower(dotnewline);
}

static void moveitem(uint8_t i, uint8_t l)
{
  uint8_t *p = objloc + i;
  if (*p == location)
    redraw |= REDRAW_MAYBE;
  if (l == location)
    redraw |= REDRAW;
  *p = l;
}

static void run_actions(const uint8_t *p, uint8_t n)
{
  uint8_t i;

  for (i = 0; i < n; i++) {
    uint8_t a = *p++;
    uint8_t tmp;
    uint16_t tmp16;

    if (a < 50) {
      strout_lower_spc(msgptr[a]);
      continue;
    }
    if (a > 102 ) {
      strout_lower_spc(msgptr[a - 50]);
      continue;
    }
    switch(a) {
      case 51:	/* nop - check */
        break;
      case 52:	/* Get */
        if (carried >= maxcar)
          strout_lower(toomuch);
        else
          moveitem(*param++, 255);
        break;
      case 53: /* Drop */
        moveitem(*param++, location);
        break;
      case 54: /* Go */
        location = *param++;
        redraw = REDRAW;
        break;
      case 55: /* Destroy */
      case 59: /* ?? */
        moveitem(*param++, 0);
        break;
      case 56:	/* Set dark flag */
        bitflags |= (1 << DARKFLAG);
        break;
      case 57:	/* Clear dark flag */
        bitflags &= ~(1 << DARKFLAG);
        break;
      case 58:	/* Set bit */
        bitflags |= (1 << *param++);
        break;
      /* 59 see 55 */
      case 60:	/* Clear bit */
        bitflags &= ~(1 << *param++);
        break;
      case 61:	/* Dead */
        action_dead();
        break;
      case 64:	/* Look */
      case 76:	/* Also Look ?? */
        action_look();
        break;
      case 62:	/* Place obj, loc */
        tmp = *param++;
        moveitem(tmp, *param++);
        break;
      case 63:	/* Game over */
        action_quit();
      case 65:	/* Score */
        action_score();
        break;
      case 66:	/* Inventory */
        action_inventory();
      case 67:	/* Set bit 0 */
        bitflags |= (1 << 0);
        break;
      case 68:	/* Clear bit 0 */
        bitflags &= ~(1 << 0);
        break;
      case 69:	/* Refill lamp */
        lighttime = lightfill;
        bitflags &= ~(1 << LIGHTOUT);
        moveitem(LIGHT_SOURCE, 255);
        break;
      case 70:	/* Wipe lower */
        /* TODO */
        break;
      case 71:	/* Save */
        /* TODO */
      case 72:	/* Swap two objects */
        tmp = objloc[*param];
        moveitem(*param, objloc[param[1]]);
        moveitem(param[1], tmp);
        param += 2;
        break;
      case 73:
        continuation = 1;
        break;
      case 74:	/* Get without weight rule */
        moveitem(*param++, 255);
        break;
      case 75:	/* Put one item by another */
        moveitem(*param, objloc[param[1]]);
        param += 2;
        break;
      case 77:	/* Decrement counter */
        if (counter >= 0)
          counter--;
        break;
      case 78:	/* Display counter */
        decout_lower(counter);
        break;
      case 79:	/* Set counter */
        counter = *param++;
        break;
      case 80:	/* Swap player and saved room */
        tmp = savedroom;
        savedroom = location;
        location = tmp;
        redraw = REDRAW;
        break;
      case 81:	/* Swap counter and counter n */
        tmp16 = counter;
        counter = counter_array[*param];
        counter_array[*param++] = tmp16;
        break;
      case 82:	/* Add to counter */
        counter += *param++;
        break;
      case 83:	/* Subtract from counter */
        counter -= *param++;
        if (counter < 0)
          counter = -1;
        break;
      case 84:	/* Print noun, newline */
        strout_lower((uint8_t *)nounbuf);
        /* Fall through */
      case 86:	/* Print newline */
        strout_lower(newline);
        break;
      case 85:	/* Print noun */ 
        strout_lower((uint8_t *)nounbuf);
        break;
      case 87: /* Swap player and saveroom array entry */
        tmp16 = *param++;
        tmp = roomsave[tmp16];
        roomsave[tmp16] = location;
        if (tmp != location) {
          location = tmp;
          redraw = REDRAW;
        }
        break;
      case 88:
        action_delay();
        break;
      case 89:
        param++;		/* SAGA etc specials */
        break;
      default:
        error("BADACT");
    }
  }
}

void next_line(void)
{
  uint8_t c = *linestart++;
  if (!(c & 0x80))
    linestart += 2;	/* Skip verb/noun */
  else if (!(c & 0x60))
    linestart++;	/* Skip random value */
  linestart += (c & 3) + 1;	/* Actions 1 - 4 */
  c >>= 1;
  c &= 0x0E;		/* 2 x conditions */
  linestart += c;
}

void run_line(const uint8_t *ptr, uint8_t c, uint8_t a)
{
  memset(param_buf, 0, sizeof(param_buf));
  param = param_buf;
  if (c)
    ptr = run_conditions(ptr, c);
  if (ptr) {
    actmatch = 1;
    param = param_buf;
    run_actions(ptr, a);
  }
  next_line();
}

void run_table(const uint8_t *tp)
{
  continuation = 0;
  linestart = tp;
  while(1) {
    uint8_t hdr;
    uint8_t c, a;
    tp = linestart;
    hdr = *tp++;
    c = (hdr >> 2) & 0x07;
    a = (hdr & 3) + 1;
    
/*    printf("H%02X c = %d a = %d\n", hdr, c, a); */
    if (hdr == 255)
      return;		/* End of table */
    if (hdr & 0x80) {
      if (hdr & 0x40) {	/* Auto 0 */
        if (continuation)
          run_line(tp, c, a);
        else
          next_line();
        continue;
      }
      continuation = 0;
      if (!(hdr & 0x20)) {	/* Auto number */
        if (random_chance(*tp++))
          run_line(tp, c, a);
        else
          next_line();
        continue;
      }
      run_line(tp, c, a);
    } else {
      if (actmatch)
        return;
/*      printf("VN %d %d\n", *tp, tp[1]); */
      linematch = 1;
      continuation = 0;
      if (*tp++ == verb && (*tp == noun || *tp == 0))
        run_line(tp+1, c, a);
      else
        next_line();
    }
  }
}

uint8_t autonoun(uint8_t loc)
{
  const uint8_t *p = automap;
  if (*wordbuf == ' ' || *wordbuf == 0)
    return 255;
  while(*p) {
    if (strncasecmp((const char *)p, wordbuf, WORDSIZE) == 0 && objloc[p[WORDSIZE]] == loc)
      return p[WORDSIZE];
    p += WORDSIZE + 1;
  }
  return 255;
}
  
void run_command(void)
{
  uint8_t tmp;
  run_table(actions);
  if (actmatch)
    return;
  if (verb == VERB_GET) {		/* Get */
    if (noun == 0)
      strout_lower(whatstr);
    else if (carried >= maxcar)
      strout_lower(toomuch);
    else {
      tmp = autonoun(location);
      if (tmp == 255)
        strout_lower(beyondpower);
      else
        moveitem(tmp, 255);
    }
    actmatch = 1;
    return;
  }
  if (verb == VERB_DROP) {		/* Drop */
    if (noun == 0)
      strout_lower(whatstr);
    else {
      tmp = autonoun(255);
      if (tmp == 255)
        strout_lower(beyondpower);
      else
        moveitem(tmp, location);
    }
    actmatch = 1;
    return;
  }
}

void process_light(void)
{
  uint8_t l;
  if ((l = objloc[LIGHT_SOURCE]) == 0)
    return;
  if (lighttime == 255)
    return;
  if (!--lighttime) {
    bitflags &= ~(1 << LIGHTOUT);	/* Check clear ! */
    if (l == 255 || l == location) {
      strout_lower(lightout);
      redraw = REDRAW_MAYBE;
      return;
    }
  }
  if (lighttime > 25)
    return;
  strout_lower(lightoutin);
  decout_lower(lighttime);
  strout_lower(lighttime == 1 ? turn : turns);
}

void main_loop(void)
{
  uint8_t first = 1;
  char *p;

  action_look();
  
  while (1) {
    if (!first)
      process_light();
    else
      first = 0;
    verb = 0;
    noun = 0;
    run_table(status);

    if (redraw & REDRAW_MASK)
      action_look();

    strout_lower(whattodo);
    do {
      do {
        strout_lower(prompt);
        line_input();
        abbrevs();
        p = skip_spaces(linebuf);
      }
      while(*p == 0);

      scan_noun(p);
      if (noun && noun <= 6) {
        verb = VERB_GO;
        break;
      }
      scan_input();
      if (verb == 255)
        strout_lower(dontknow);
    } while (verb == 255);
    
    if (verb == VERB_GO) {
      if (!noun) {
        strout_lower(givedirn);
        continue;
      }
      if (noun <= 6) {
        uint8_t light = islight();
        uint8_t dir;

        if (!light)
          strout_lower(darkdanger);
        dir = locdata[location].exit[noun - 1];
        if (!dir) {
          if (!light) {
            strout_lower(brokeneck);
            action_delay();
            action_dead();
            continue;
          }
          strout_lower(cantgo);
          continue;
        }
        location = dir;
        redraw = REDRAW;
        continue;
      }
    }
    linematch = 0;
    actmatch = 0;
    run_command();
    if (actmatch)
      continue;
    if (linematch) {
      strout_lower(notyet);
      continue;
    }
    strout_lower(dontunderstand);
  }
}

void start_game(void)
{
  memcpy(objloc, objinit, sizeof(objloc));
  bitflags = 0;
  counter = 0;
  memset(counter_array, 0, sizeof(counter_array));
  savedroom = 0;
  memset(roomsave, 0, sizeof(roomsave));
  location = startloc;
  lighttime = startlamp;
  carried = startcarried;
}

int main(int argc, char *argv[])
{
  display_init();
  setjmp(restart);
  start_game();
  main_loop();
}
