COCO2
=====

(Work in progress)

COCO or Dragon 64 with an IDE port, cartridge and 64K of RAM

Supported hardware:
	IDE (Cloud9 or compatible set at FF40) with either built in
		cartridge RAM or separate cartridge

Memory Map
==========

User View
=========
0000-00FF	Interrupt stack
0100-01FF	Vectors (then wasted - could hide libc.o in there ?)
0200-19FF	Display
1A00-1BFF	udata/stack
1C00-7FFF	Common, data and some kernel code
8000-FEFF	User space
FF00-FFFF	I/O etc

Kernel Mode View
================
0000-00FF	Interrupt stack
0100-01FF	Vectors
0200-19FF	Display
1A00-1BFF	udata/stack
1C00-7FFF	Common, data and some kernel code
8000-BFFF	ROM
C000-FEFF	Kernel
FF00-FFFF	I/O etc


Emulating in XRoar
==================

Needs the IDE patches

TODO
====

Test it
Make the boot loader robust (timeout handling)
Add magic numbers to check we loaded the right thing!
Support for a real time clock and clock locking
Review irq disabling. We shouldn't need much of this at all as we don't have
floppy hell to contend with, but the switchin/switchout logic needs to be
reviewed for interrupt safety and the IRQs re-enabled during swap in and
out. We should also be totally clean now on FIR blocking, so audio might
actually be doable if not doing drivewire.

MPI switching

- Fix IDE to support the map flip on transfers (needs little asm code
  adding)
- reclaim discard space by packing bss, then buffers then discard

We have about 2K left to try and jam those bits in which might just about be
enough to add support for very minimal MBR parsing and offsets. That would
be a big improvement and make the current loading of the kernel image from
blocks 1-51 of the disk sensible. If not we need to move it.

